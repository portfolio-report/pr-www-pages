import{O as R,Q as b,u as g,R as k,S as Q,w as x,T as O,n as T}from"./D87NN1-r.js";function W(e){return R()?(b(e),!0):!1}function p(e){return typeof e=="function"?e():g(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const c=new WeakMap;function D(e,n,l={}){const{mode:y="replace",route:i=k(),router:s=Q(),transform:q=o=>o}=l;c.has(s)||c.set(s,new Map);const u=c.get(s);let t=i.query[e];W(()=>{t=void 0});let a;const h=O((o,f)=>(a=f,{get(){return o(),q(t!==void 0?t:p(n))},set(r){t!==r&&(t=r===n||r===null?void 0:r,u.set(e,r===n||r===null?void 0:r),f(),T(()=>{if(u.size===0)return;const S=Object.fromEntries(u.entries());u.clear();const{params:d,query:m,hash:w}=i;s[p(y)]({params:d,query:{...m,...S},hash:w})}))}}));return x(()=>i.query[e],o=>{t=o,a()},{flush:"sync"}),h}export{D as u};
