import{d as N,r as y,o as i,c as d,a as s,w as u,n as T,z as Q,f as a,h as C,F as W,M as B,N as E,j as Z,u as q,b as e,t as o,H as g,_ as ee,I as ae,L as te,e as n,J as F,K as V,B as D,k as le}from"./entry.2ad04205.js";import{_ as oe}from"./SecurityTag.8846f44f.js";import{u as $}from"./asyncData.2460eded.js";import{u as w}from"./useApi.dea4237b.js";import"./_plugin-vue_export-helper.a1a6add7.js";const ne=N({__name:"PricesTable",props:{prices:null},setup(v){return(p,k)=>{const m=y("Column"),c=y("DataTable");return i(),d("div",null,[s(c,{value:v.prices,class:"p-datatable-sm",paginator:!0,rows:10,"sort-field":"date","sort-order":-1,"rows-per-page-options":[10,30,100,300]},{default:u(()=>[s(m,{field:"date",header:"Date",sortable:!0}),s(m,{field:"close",header:"Close"})]),_:1},8,["value"])])}}}),se=N({__name:"CountryFlag",props:{country:null},setup(v){const p=v,k=T(()=>({AR:"i-flagpack-ar",AT:"i-flagpack-at",AU:"i-flagpack-au",BE:"i-flagpack-be",BR:"i-flagpack-br",CA:"i-flagpack-ca",CH:"i-flagpack-ch",CN:"i-flagpack-cn",DE:"i-flagpack-de",DK:"i-flagpack-dk",ES:"i-flagpack-es",FI:"i-flagpack-fi",FR:"i-flagpack-fr",GB:"i-flagpack-gb-ukm",GR:"i-flagpack-gr",IR:"i-flagpack-ie",IN:"i-flagpack-in",IT:"i-flagpack-it",JP:"i-flagpack-jp",KR:"i-flagpack-kr",LI:"i-flagpack-li",LU:"i-flagpack-lu",NL:"i-flagpack-nl",NO:"i-flagpack-no",NZ:"i-flagpack-nz",PL:"i-flagpack-pl",PT:"i-flagpack-pt",RU:"i-flagpack-ru",SE:"i-flagpack-se",SG:"i-flagpack-sg",TR:"i-flagpack-tr",TW:"i-flagpack-tw",US:"i-flagpack-us",VN:"i-flagpack-vn",ZA:"i-flagpack-za"})[p.country]);return(m,c)=>(i(),d("i",{class:Q(["ii",a(k)])},null,2))}}),re={class:"flex justify-content-center"},ie={style:{width:"800px"}},ue={class:"flex flex-wrap"},ce={class:"flex-grow-1"},de=["src"],pe={key:0},me={key:1},fe={key:2},_e={key:3},ye={key:0},ge=e("h4",null,"Country",-1),Ce=N({__name:"[uuid]",async setup(v){let p,k;const m=C(""),c=C(null),P=W(),{data:S,error:U}=([p,k]=B(()=>$(`security:${P.params.uuid}`,()=>w(`/securities/uuid/${P.params.uuid}`))),p=await p,k(),p);if(U.value||!S.value)throw E({statusCode:404,message:"This page could not be found",fatal:!0});const l=C(S.value),A=T(()=>{var r,f;return(f=(r=l.value)==null?void 0:r.markets)==null?void 0:f.map(_=>{let b;return _.marketCode==="XETR"?b="XETRA (Frankfurt)":_.marketCode==="XFRA"?b="Frankfurt":_.marketCode==="XNAS"?b="NASDAQ":_.marketCode==="XNYS"&&(b="NYSE"),{..._,name:b}})}),{data:R}=([p,k]=B(()=>$("taxonomies",()=>w("/taxonomies/"))),p=await p,k(),p);if(!R.value)throw E({statusCode:404,message:"This page could not be found",fatal:!0});const L=C(R.value),z=T(()=>l.value.securityTaxonomies.map(r=>({...r,weight:Number(r.weight),taxonomy:L.value.find(f=>f.uuid===r.taxonomyUuid)}))),I=T(()=>z.value.filter(r=>r.rootTaxonomyUuid==="5b0d5647-a4e6-4db8-807b-c3a6d11697a7"));Z(m,async r=>{c.value=await w(`/securities/uuid/${P.params.uuid}/markets/${r}`,{params:{from:"2000-01-01"}})});async function K({date:r}){if(await w(`/securities/uuid/${l.value.uuid}/markets/${m.value}/prices/${r}`,{method:"delete"}),c.value){const f=c.value.prices.findIndex(_=>_.date===r);delete c.value.prices[f]}}return q(()=>{var r;return{title:((r=l.value)==null?void 0:r.name)+" - Portfolio Report"}}),(r,f)=>{const _=y("Button"),b=ee,M=y("Chip"),j=oe,x=y("TabPanel"),G=y("Dropdown"),H=ne,h=y("Column"),Y=se,X=y("DataTable"),J=y("TabView"),O=ae("tooltip");return i(),d("div",re,[e("div",ie,[e("div",ue,[e("div",ce,[e("h2",null,o(a(l).name),1),s(b,{to:r.$route.path},{default:u(()=>[te(s(_,{class:"mt-2 cursor-move w-20rem",icon:"i-carbon-move i-lg",label:"Add to Portfolio Performance"},null,512),[[O,{escape:!0,value:"<h4>Drag and drop!</h4> To add this security in Portfolio Performance, drag and drop it to securities list or statement of assets."},void 0,{right:!0}]])]),_:1},8,["to"])]),e("div",null,[a(l).logoUrl?(i(),d("img",{key:0,src:a(l).logoUrl,style:{"max-width":"100px","max-height":"100px","mix-blend-mode":"multiply"}},null,8,de)):g("",!0)])]),s(J,{class:"mt-2"},{default:u(()=>[s(x,{header:"Overview"},{default:u(()=>[e("ul",null,[e("li",null,[n(" ISIN: "),e("b",null,o(a(l).isin),1)]),e("li",null,[n(" WKN: "),e("b",null,o(a(l).wkn),1)]),(i(!0),d(F,null,V(a(A),t=>(i(),d("li",{key:t.marketCode},[n(" Market: "),e("b",null,o(t.name),1),e("ul",null,[e("li",null,[n(" Currency: "),e("b",null,o(t.currencyCode||"-"),1)]),e("li",null,[n(" Symbol: "),e("b",null,o(t.symbol),1)]),e("li",null,[n(" Prices available: "),e("b",null,o(t.firstPriceDate),1),n(" - "),e("b",null,o(t.lastPriceDate),1)])])]))),128)),a(l).symbolXfra?(i(),d("li",pe,[n(" Symbol (Frankfurt): "),e("b",null,o(a(l).symbolXfra),1)])):g("",!0),a(l).symbolXnas?(i(),d("li",me,[n(" Symbol (NASDAQ): "),e("b",null,o(a(l).symbolXnas),1)])):g("",!0),a(l).symbolXnys?(i(),d("li",fe,[n(" Symbol (New York): "),e("b",null,o(a(l).symbolXnys),1)])):g("",!0),e("li",null,[n(" Type: "),s(M,{class:"mx-1 text-sm bg-teal-500 text-white"},{default:u(()=>[n(o(a(l).securityType),1)]),_:1})]),a(l).tags&&a(l).tags.length>0?(i(),d("li",_e,[n(" Tags: "),(i(!0),d(F,null,V(a(l).tags,t=>(i(),D(j,{key:t,name:t},null,8,["name"]))),128))])):g("",!0)])]),_:1}),s(x,{header:"Prices"},{default:u(()=>[s(G,{id:"market",modelValue:a(m),"onUpdate:modelValue":f[0]||(f[0]=t=>le(m)?m.value=t:null),options:a(A),"option-label":"name","option-value":"marketCode",placeholder:"Please select market"},{option:u(({option:t})=>[n(o(t.name)+" - "+o(t.marketCode),1)]),_:1},8,["modelValue","options"]),a(c)?(i(),d("div",ye,[e("ul",null,[e("li",null,[n(" Symbol: "),e("b",null,o(a(c).symbol),1)]),e("li",null,[n(" Currency: "),e("b",null,o(a(c).currencyCode||"-"),1)]),e("li",null,[n(" Prices available: "),e("b",null,o(a(c).firstPriceDate),1),n(" - "),e("b",null,o(a(c).lastPriceDate),1)])]),s(H,{prices:a(c).prices,onDeletePrice:K},null,8,["prices"])])):g("",!0)]),_:1}),a(I)?(i(),D(x,{key:0,header:"Categories"},{default:u(()=>[ge,s(X,{value:a(I),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm"},{default:u(()=>[s(h,{field:"weight",header:"Percentage",sortable:!0},{body:u(({data:t})=>[n(o(t.weight)+"%",1)]),_:1}),s(h,{field:"taxonomy.name",header:"Country",sortable:!0},{body:u(({data:t})=>[s(Y,{country:t.taxonomy.code},null,8,["country"]),n(" "+o(t.taxonomy.name),1)]),_:1}),s(h,{field:"taxonomy.code",header:"Code",sortable:!0})]),_:1},8,["value"])]),_:1})):g("",!0),a(l).events&&a(l).events.length>0?(i(),D(x,{key:1,header:"Events"},{default:u(()=>[s(X,{value:a(l).events},{default:u(()=>[s(h,{field:"date",header:"Date"}),s(h,{field:"type",header:"Type",style:{"text-transform":"capitalize"}}),s(h,{header:"..."},{body:u(({data:t})=>[n(o(t.type==="dividend"?t.amount+" "+t.currencyCode:"")+" "+o(t.type==="split"?t.ratio:""),1)]),_:1})]),_:1},8,["value"])]),_:1})):g("",!0)]),_:1})])])}}});export{Ce as default};
