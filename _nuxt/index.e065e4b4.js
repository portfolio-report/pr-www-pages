import{_ as w}from"./TextBtn.2f02a5f9.js";import{d as S,j as T,o as n,c as i,b as h,a,n as o,F as u,l as v,e as p,t as _,w as d,q as B,r as m,m as L,_ as A}from"./entry.095dbec7.js";import{a as I}from"./asyncData.6be64e61.js";import"./_plugin-vue_export-helper.a1a6add7.js";const F=p("Statistics "),N={class:"flex align-items-end",style:{height:"400px"}},V=h("h2",null,"Client Updates",-1),z=S({__name:"index",setup($){const{data:r,pending:y,refresh:U}=I(async()=>{const s=await B("/stats/updates");for(const t of s)t.firstUpdate&&(t.firstUpdate=new Date(t.firstUpdate),t.firstUpdateInt=t.firstUpdate.getTime()),t.lastUpdate&&(t.lastUpdate=new Date(t.lastUpdate),t.lastUpdateInt=t.lastUpdate.getTime());return{lastUpdate:new Date().toISOString(),versions:s}},"$AU7PyxXx3W"),g=T(()=>{var s,t;return{labels:(s=r.value)==null?void 0:s.versions.map(l=>l.version),datasets:[{backgroundColor:"#3B82F6",data:(t=r.value)==null?void 0:t.versions.map(l=>l.count)}]}}),b={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}};return(s,t)=>{const l=w,f=m("Skeleton"),x=m("Chart"),k=A,c=m("Column"),C=m("DataTable");return n(),i("div",null,[h("h1",null,[F,a(l,{icon:"i-carbon-renew",onClick:t[0]||(t[0]=e=>o(U)())})]),o(y)||!o(r)?(n(),i(u,{key:0},[a(f,{width:"15em"}),h("div",N,[(n(),i(u,null,v([30,25,45,70,90],(e,D)=>a(f,{key:D,width:"20%",height:e+"%",class:"mr-2"},null,8,["height"])),64))]),(n(!0),i(u,null,v(Array(10).keys(),e=>(n(),L(f,{key:e,class:"mt-4"}))),128))],64)):(n(),i(u,{key:1},[p(" Last update: "+_(o(r).lastUpdate)+" ",1),V,a(x,{type:"bar",data:o(g),options:b,style:{height:"400px"}},null,8,["data"]),a(C,{value:o(r).versions,"sort-field":"version",class:"p-datatable-sm","sort-order":-1},{default:d(()=>[a(c,{field:"version",header:"Version",sortable:!0},{body:d(({data:e})=>[a(k,{to:`/stats/${e.version}`},{default:d(()=>[p(_(e.version),1)]),_:2},1032,["to"])]),_:1}),a(c,{field:"firstUpdateInt",header:"From",sortable:!0},{body:d(e=>[p(_(e.data.firstUpdate.toLocaleString("de-DE")),1)]),_:1}),a(c,{field:"lastUpdateInt",header:"To",sortable:!0},{body:d(e=>[p(_(e.data.lastUpdate.toLocaleString("de-DE")),1)]),_:1}),a(c,{field:"count",header:"Count",sortable:!0,class:"text-right"})]),_:1},8,["value"])],64))])}}});export{z as default};
