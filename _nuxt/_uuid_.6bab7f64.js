import{d as N,r as _,o as r,c,a as n,w as i,n as T,z as Q,f as b,h as C,F as W,M as B,N as E,j as Z,u as q,b as e,t as l,H as y,_ as ee,I as ae,L as te,e as o,J as F,K as V,B as D}from"./entry.b9cf005b.js";import{_ as le}from"./SecurityTag.6cbf0a0c.js";import{u as $}from"./asyncData.accd5a0b.js";import{u as w}from"./useApi.604bfacd.js";import"./_plugin-vue_export-helper.a1a6add7.js";const oe=N({__name:"PricesTable",props:{prices:null},setup(h){return(d,g)=>{const p=_("Column"),u=_("DataTable");return r(),c("div",null,[n(u,{value:h.prices,class:"p-datatable-sm",paginator:!0,rows:10,"sort-field":"date","sort-order":-1,"rows-per-page-options":[10,30,100,300]},{default:i(()=>[n(p,{field:"date",header:"Date",sortable:!0}),n(p,{field:"close",header:"Close"})]),_:1},8,["value"])])}}}),ne=N({__name:"CountryFlag",props:{country:null},setup(h){const d=h,g=T(()=>({AR:"i-flagpack-ar",AT:"i-flagpack-at",AU:"i-flagpack-au",BE:"i-flagpack-be",BR:"i-flagpack-br",CA:"i-flagpack-ca",CH:"i-flagpack-ch",CN:"i-flagpack-cn",DE:"i-flagpack-de",DK:"i-flagpack-dk",ES:"i-flagpack-es",FI:"i-flagpack-fi",FR:"i-flagpack-fr",GB:"i-flagpack-gb-ukm",GR:"i-flagpack-gr",IR:"i-flagpack-ie",IN:"i-flagpack-in",IT:"i-flagpack-it",JP:"i-flagpack-jp",KR:"i-flagpack-kr",LI:"i-flagpack-li",LU:"i-flagpack-lu",NL:"i-flagpack-nl",NO:"i-flagpack-no",NZ:"i-flagpack-nz",PL:"i-flagpack-pl",PT:"i-flagpack-pt",RU:"i-flagpack-ru",SE:"i-flagpack-se",SG:"i-flagpack-sg",TR:"i-flagpack-tr",TW:"i-flagpack-tw",US:"i-flagpack-us",VN:"i-flagpack-vn",ZA:"i-flagpack-za"})[d.country]);return(p,u)=>(r(),c("i",{class:Q(["ii",b(g)])},null,2))}}),se={class:"flex justify-content-center"},re={style:{width:"800px"}},ie={class:"flex flex-wrap"},ue={class:"flex-grow-1"},ce=["src"],de={key:0},pe={key:1},me={key:2},fe={key:3},_e={key:0},ye=e("h4",null,"Country",-1),xe=N({__name:"[uuid]",async setup(h){let d,g;const p=C(""),u=C(null),P=W(),{data:S,error:U}=([d,g]=B(()=>$(`security:${P.params.uuid}`,()=>w(`/securities/uuid/${P.params.uuid}`))),d=await d,g(),d);if(U.value||!S.value)throw E({statusCode:404,message:"This page could not be found",fatal:!0});const t=C(S.value),A=T(()=>{var s,m;return(m=(s=t.value)==null?void 0:s.markets)==null?void 0:m.map(f=>{let v;return f.marketCode==="XETR"?v="XETRA (Frankfurt)":f.marketCode==="XFRA"?v="Frankfurt":f.marketCode==="XNAS"?v="NASDAQ":f.marketCode==="XNYS"&&(v="NYSE"),{...f,name:v}})}),{data:R}=([d,g]=B(()=>$("taxonomies",()=>w("/taxonomies/"))),d=await d,g(),d);if(!R.value)throw E({statusCode:404,message:"This page could not be found",fatal:!0});const L=C(R.value),z=T(()=>t.value.securityTaxonomies.map(s=>({...s,weight:Number(s.weight),taxonomy:L.value.find(m=>m.uuid===s.taxonomyUuid)}))),I=T(()=>z.value.filter(s=>s.rootTaxonomyUuid==="5b0d5647-a4e6-4db8-807b-c3a6d11697a7"));Z(p,async s=>{u.value=await w(`/securities/uuid/${P.params.uuid}/markets/${s}`,{params:{from:"2000-01-01"}})});async function K({date:s}){if(await w(`/securities/uuid/${t.value.uuid}/markets/${p.value}/prices/${s}`,{method:"delete"}),u.value){const m=u.value.prices.findIndex(f=>f.date===s);delete u.value.prices[m]}}return q(()=>{var s;return{title:((s=t.value)==null?void 0:s.name)+" - Portfolio Report"}}),(s,m)=>{const f=_("Button"),v=ee,M=_("Chip"),j=le,x=_("TabPanel"),G=_("Dropdown"),H=oe,k=_("Column"),Y=ne,X=_("DataTable"),J=_("TabView"),O=ae("tooltip");return r(),c("div",se,[e("div",re,[e("div",ie,[e("div",ue,[e("h2",null,l(t.value.name),1),n(v,{to:s.$route.path},{default:i(()=>[te(n(f,{class:"mt-2 cursor-move w-20rem",icon:"i-carbon-move i-lg",label:"Add to Portfolio Performance"},null,512),[[O,{escape:!0,value:"<h4>Drag and drop!</h4> To add this security in Portfolio Performance, drag and drop it to securities list or statement of assets."},void 0,{right:!0}]])]),_:1},8,["to"])]),e("div",null,[t.value.logoUrl?(r(),c("img",{key:0,src:t.value.logoUrl,style:{"max-width":"100px","max-height":"100px","mix-blend-mode":"multiply"}},null,8,ce)):y("",!0)])]),n(J,{class:"mt-2"},{default:i(()=>[n(x,{header:"Overview"},{default:i(()=>[e("ul",null,[e("li",null,[o(" ISIN: "),e("b",null,l(t.value.isin),1)]),e("li",null,[o(" WKN: "),e("b",null,l(t.value.wkn),1)]),(r(!0),c(F,null,V(b(A),a=>(r(),c("li",{key:a.marketCode},[o(" Market: "),e("b",null,l(a.name),1),e("ul",null,[e("li",null,[o(" Currency: "),e("b",null,l(a.currencyCode||"-"),1)]),e("li",null,[o(" Symbol: "),e("b",null,l(a.symbol),1)]),e("li",null,[o(" Prices available: "),e("b",null,l(a.firstPriceDate),1),o(" - "),e("b",null,l(a.lastPriceDate),1)])])]))),128)),t.value.symbolXfra?(r(),c("li",de,[o(" Symbol (Frankfurt): "),e("b",null,l(t.value.symbolXfra),1)])):y("",!0),t.value.symbolXnas?(r(),c("li",pe,[o(" Symbol (NASDAQ): "),e("b",null,l(t.value.symbolXnas),1)])):y("",!0),t.value.symbolXnys?(r(),c("li",me,[o(" Symbol (New York): "),e("b",null,l(t.value.symbolXnys),1)])):y("",!0),e("li",null,[o(" Type: "),n(M,{class:"mx-1 text-sm bg-teal-500 text-white"},{default:i(()=>[o(l(t.value.securityType),1)]),_:1})]),t.value.tags&&t.value.tags.length>0?(r(),c("li",fe,[o(" Tags: "),(r(!0),c(F,null,V(t.value.tags,a=>(r(),D(j,{key:a,name:a},null,8,["name"]))),128))])):y("",!0)])]),_:1}),n(x,{header:"Prices"},{default:i(()=>[n(G,{id:"market",modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=a=>p.value=a),options:b(A),"option-label":"name","option-value":"marketCode",placeholder:"Please select market"},{option:i(({option:a})=>[o(l(a.name)+" - "+l(a.marketCode),1)]),_:1},8,["modelValue","options"]),u.value?(r(),c("div",_e,[e("ul",null,[e("li",null,[o(" Symbol: "),e("b",null,l(u.value.symbol),1)]),e("li",null,[o(" Currency: "),e("b",null,l(u.value.currencyCode||"-"),1)]),e("li",null,[o(" Prices available: "),e("b",null,l(u.value.firstPriceDate),1),o(" - "),e("b",null,l(u.value.lastPriceDate),1)])]),n(H,{prices:u.value.prices,onDeletePrice:K},null,8,["prices"])])):y("",!0)]),_:1}),b(I)?(r(),D(x,{key:0,header:"Categories"},{default:i(()=>[ye,n(X,{value:b(I),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm"},{default:i(()=>[n(k,{field:"weight",header:"Percentage",sortable:!0},{body:i(({data:a})=>[o(l(a.weight)+"%",1)]),_:1}),n(k,{field:"taxonomy.name",header:"Country",sortable:!0},{body:i(({data:a})=>[n(Y,{country:a.taxonomy.code},null,8,["country"]),o(" "+l(a.taxonomy.name),1)]),_:1}),n(k,{field:"taxonomy.code",header:"Code",sortable:!0})]),_:1},8,["value"])]),_:1})):y("",!0),t.value.events&&t.value.events.length>0?(r(),D(x,{key:1,header:"Events"},{default:i(()=>[n(X,{value:t.value.events},{default:i(()=>[n(k,{field:"date",header:"Date"}),n(k,{field:"type",header:"Type",style:{"text-transform":"capitalize"}}),n(k,{header:"..."},{body:i(({data:a})=>[o(l(a.type==="dividend"?a.amount+" "+a.currencyCode:"")+" "+l(a.type==="split"?a.ratio:""),1)]),_:1})]),_:1},8,["value"])]),_:1})):y("",!0)]),_:1})])])}}});export{xe as default};
