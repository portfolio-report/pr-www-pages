import{t as k,a as y}from"./Dv2aTrmu.js";import{aj as x,ak as Q,al as _,w as g,n as j}from"./Ce7kGYyq.js";const i=new WeakMap;function b(o,n,f={}){const{mode:q="replace",route:a=x(),router:s=Q(),transform:l=t=>t}=f;i.has(s)||i.set(s,new Map);const u=i.get(s);let e=a.query[o];k(()=>{e=void 0});let c;const m=_((t,p)=>(c=p,{get(){return t(),l(e!==void 0?e:y(n))},set(r){e!==r&&(e=r===n||r===null?void 0:r,u.set(o,r===n||r===null?void 0:r),p(),j(()=>{if(u.size===0)return;const h=Object.fromEntries(u.entries());u.clear();const{params:w,query:R,hash:d}=a;s[y(q)]({params:w,query:{...R,...h},hash:d})}))}}));return g(()=>a.query[o],t=>{e!==t&&(e=t,c())},{flush:"sync"}),m}export{b as u};
