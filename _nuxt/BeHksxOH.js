import{aj as S,ak as b,u as g,al as R,am as x,an as Q,w as W,n as _}from"./QxNUjpu0.js";function j(e){return S()?(b(e),!0):!1}function p(e){return typeof e=="function"?e():g(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const i=new WeakMap;function G(e,s,l={}){const{mode:y="replace",route:a=R(),router:n=x(),transform:q=o=>o}=l;i.has(n)||i.set(n,new Map);const u=i.get(n);let r=a.query[e];j(()=>{r=void 0});let c;const h=Q((o,f)=>(c=f,{get(){return o(),q(r!==void 0?r:p(s))},set(t){r!==t&&(r=t===s||t===null?void 0:t,u.set(e,t===s||t===null?void 0:t),f(),_(()=>{if(u.size===0)return;const m=Object.fromEntries(u.entries());u.clear();const{params:d,query:k,hash:w}=a;n[p(y)]({params:d,query:{...k,...m},hash:w})}))}}));return W(()=>a.query[e],o=>{r!==o&&(r=o,c())},{flush:"sync"}),h}export{G as u};
