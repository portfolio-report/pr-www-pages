import{_ as C}from"./BEyyuFRz.js";import{q as D,h as w,W as _,u as t,a as V,c as l,A as v,x as a,X as c,Y as x,z as U,y as p,o as r,F,G as Y,_ as I}from"./ByG2kjBI.js";import{u as L}from"./zLt94x4p.js";import{c as N,a as u,b as z}from"./YQGdeeOK.js";import{u as W}from"./DrxCvoxh.js";import{a as k}from"./vWD8drl_.js";import{s as H}from"./dMbTjTAH.js";import{s as f}from"./DUxqV4YL.js";import{a as M}from"./iYKzCjQU.js";import"./DlAUqK2U.js";import"./Bz46heOF.js";const S=D({__name:"Date",props:{value:{}},setup(y){const d=y,m=w(()=>new Date(d.value)),n=L(m.value,"YYYY-MM-DD HH:mm:ss");return(h,b)=>_(t(n))}}),X={class:"p-buttonset"},q=v("h2",null,"Version Statistics",-1),E={class:"flex items-end",style:{height:"400px"}},at=D({__name:"index",setup(y){const d=V(new Date),m=M(d),{data:n,pending:h,refresh:b}=N(async()=>{const o=await W("/stats/updates");for(const e of o)e.firstUpdate&&(e.firstUpdate=new Date(e.firstUpdate),e.firstUpdateInt=e.firstUpdate.getTime()),e.lastUpdate&&(e.lastUpdate=new Date(e.lastUpdate),e.lastUpdateInt=e.lastUpdate.getTime());return d.value=new Date,{versions:o}},"$AU7PyxXx3W"),$=w(()=>{var o,e;return{labels:(o=n.value)==null?void 0:o.versions.map(i=>i.version),datasets:[{backgroundColor:"#3B82F6",data:(e=n.value)==null?void 0:e.versions.map(i=>i.count)}]}}),T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}};return(o,e)=>{const i=C,A=I,g=S;return r(),l("div",null,[v("div",X,[a(t(k),{label:"Versions",icon:"i-carbon-tag",class:"p-button-primary",disabled:!0}),a(t(k),{label:"Weekly",icon:"i-carbon-calendar",class:"p-button-secondary",onClick:e[0]||(e[0]=s=>("navigateTo"in o?o.navigateTo:t(F))("/stats/weekly/"))})]),q,t(h)||!t(n)?(r(),l(c,{key:0},[a(t(f),{width:"15em"}),v("div",E,[(r(),l(c,null,x([30,25,45,70,90],(s,B)=>a(t(f),{key:B,width:"20%",height:`${s}%`,class:"mr-2"},null,8,["height"])),64))]),(r(!0),l(c,null,x(Array(10).keys(),s=>(r(),Y(t(f),{key:s,class:"mt-4"}))),128))],64)):(r(),l(c,{key:1},[U(" Last updated "+_(t(m))+" ",1),a(i,{small:"",icon:"i-carbon-renew",onClick:e[1]||(e[1]=s=>t(b)())}),a(t(H),{type:"bar",data:t($),options:T,style:{height:"400px"}},null,8,["data"]),a(t(z),{value:t(n).versions,"sort-field":"version",class:"font-mono",size:"small","sort-order":-1},{default:p(()=>[a(t(u),{field:"version",header:"Version",sortable:!0},{body:p(({data:s})=>[a(A,{to:`/stats/${s.version}`,class:"text-blue-500"},{default:p(()=>[U(_(s.version),1)]),_:2},1032,["to"])]),_:1}),a(t(u),{field:"firstUpdateInt",header:"From",sortable:!0},{body:p(s=>[a(g,{value:s.data.firstUpdate},null,8,["value"])]),_:1}),a(t(u),{field:"lastUpdateInt",header:"To",sortable:!0},{body:p(s=>[a(g,{value:s.data.lastUpdate},null,8,["value"])]),_:1}),a(t(u),{field:"count",header:"Count",sortable:!0,class:"!text-right"})]),_:1},8,["value"])],64))])}}});export{at as default};
