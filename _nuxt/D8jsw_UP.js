import{_ as le}from"./DV0PjAOX.js";import{u as se}from"./DdMLl6Io.js";import{h as R,r as w,l as _,t as u,m,N as ne,v as r,x as a,q as o,s as i,u as e,O as re,c as S,y as ie,P as ce,H as n,i as Q,C as ue,Q as G,R as K,w as de,j as pe,E as me,I as j,J as H,K as E,F as N,G as D,S as fe,_ as _e,L as ye,M as ge}from"./CVIJIBpm.js";import{u as J}from"./BLxUdW0z.js";import{u as A}from"./BCN--xUV.js";import{_ as ve}from"./DlAUqK2U.js";const be=R({__name:"CopyClipboard",props:{text:{}},setup(y){const p=y,{copy:g}=se(),d=w(null);async function c(v){var b,k;g(p.text),(b=d.value)==null||b.show(v),await new Promise(l=>setTimeout(l,1500)),(k=d.value)==null||k.hide()}return(v,b)=>{const k=_("InlineMessage");return u(),m("span",null,[ne(v.$slots,"default"),r(),a("a",{class:"ii i-carbon-copy cursor-pointer hover:text-primary-500",onClick:b[0]||(b[0]=l=>c(l))}),o(e(re),{ref_key:"overlay",ref:d,dismissable:!1,"close-on-escape":!1,pt:{content:{class:"p-0"}}},{default:i(()=>[o(k,{severity:"success"},{default:i(()=>[r("Copied to clipboard")]),_:1})]),_:1},512)])}}}),ke=R({__name:"CountryFlag",props:{country:{}},setup(y){const p=y,g=S(()=>({AR:"i-flagpack-ar",AT:"i-flagpack-at",AU:"i-flagpack-au",BE:"i-flagpack-be",BR:"i-flagpack-br",CA:"i-flagpack-ca",CH:"i-flagpack-ch",CN:"i-flagpack-cn",DE:"i-flagpack-de",DK:"i-flagpack-dk",ES:"i-flagpack-es",FI:"i-flagpack-fi",FR:"i-flagpack-fr",GB:"i-flagpack-gb-ukm",GR:"i-flagpack-gr",IR:"i-flagpack-ie",IN:"i-flagpack-in",IT:"i-flagpack-it",JP:"i-flagpack-jp",KR:"i-flagpack-kr",LI:"i-flagpack-li",LU:"i-flagpack-lu",NL:"i-flagpack-nl",NO:"i-flagpack-no",NZ:"i-flagpack-nz",PL:"i-flagpack-pl",PT:"i-flagpack-pt",RU:"i-flagpack-ru",SE:"i-flagpack-se",SG:"i-flagpack-sg",TR:"i-flagpack-tr",TW:"i-flagpack-tw",US:"i-flagpack-us",VN:"i-flagpack-vn",ZA:"i-flagpack-za"})[p.country]);return(d,c)=>(u(),m("i",{class:ie(["ii",e(g)])},null,2))}}),he=R({__name:"PricesTable",props:{prices:{}},setup(y){const p=y,g=S(()=>p.prices.map(c=>({dateStr:c.date,date:new Date(c.date),close:c.close}))),d=w({date:{operator:ce.AND,constraints:[{value:null,matchMode:"dateIs"}]}});return(c,v)=>{const b=_("Calendar"),k=_("Column"),l=_("DataTable");return u(),m("div",null,[o(l,{filters:e(d),"onUpdate:filters":v[0]||(v[0]=f=>Q(d)?d.value=f:null),value:e(g),class:"p-datatable-sm",paginator:!0,rows:10,"sort-field":"date","sort-order":-1,"rows-per-page-options":[10,30,100,300],"filter-display":"menu"},{default:i(()=>[o(k,{field:"date",header:"Date",sortable:"","data-type":"date"},{body:i(({data:f})=>[r(n(f.dateStr),1)]),filter:i(({filterModel:f})=>[o(b,{modelValue:f.value,"onUpdate:modelValue":$=>f.value=$,"date-format":"yy-mm-dd",placeholder:"yyyy-mm-dd"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(k,{field:"close",header:"Close"},{body:i(({data:f})=>[r(n(f.close.toLocaleString(void 0,{minimumFractionDigits:2})),1)]),_:1})]),_:1},8,["filters","value"])])}}}),xe=y=>(ye("data-v-2a78574d"),y=y(),ge(),y),Ce={class:"flex justify-content-center"},we={style:{width:"800px"}},Te={class:"flex flex-wrap"},Pe={class:"flex-grow-1"},De={class:"separator-container"},Se=xe(()=>a("span",{class:"mt-2 cursor-move w-20rem p-button p-component"},[a("span",{class:"i-carbon-move i-lg p-button-icon p-button-icon-left"}),a("span",{class:"p-button-label"},"Add to Portfolio Performance")],-1)),Ie=["src"],Ne={key:0},$e={key:1},Ae={key:2},Re={key:3},Ve={key:0},Ue=R({__name:"[uuid]",async setup(y){let p,g;const d=w(""),c=w(null),v=ue(),{data:b,error:k}=([p,g]=G(()=>J(`security:${v.params.uuid}`,()=>A(`/securities/uuid/${v.params.uuid}`))),p=await p,g(),p);if(k.value||!b.value)throw K({statusCode:404,message:"This page could not be found",fatal:!0});const l=w(b.value),f=S(()=>{var s,h;return(h=(s=l.value)==null?void 0:s.markets)==null?void 0:h.map(x=>{let P;return x.marketCode==="XETR"?P="XETRA (Frankfurt)":x.marketCode==="XFRA"?P="Frankfurt":x.marketCode==="XNAS"?P="NASDAQ":x.marketCode==="XNYS"&&(P="NYSE"),{...x,name:P}})}),{data:$}=([p,g]=G(()=>J("taxonomies",()=>A("/taxonomies/"))),p=await p,g(),p);if(!$.value)throw K({statusCode:404,message:"This page could not be found",fatal:!0});const W=w($.value),F=S(()=>l.value.securityTaxonomies.map(s=>({...s,weight:Number(s.weight),taxonomy:W.value.find(h=>h.uuid===s.taxonomyUuid)}))),T=S(()=>F.value.filter(s=>s.rootTaxonomyUuid==="5b0d5647-a4e6-4db8-807b-c3a6d11697a7")),L=w();function Y(s){L.value.toggle(s)}const I=S(()=>F.value.filter(s=>s.rootTaxonomyUuid==="072bba7b-ed7a-4cb4-aab3-91520d00fb00")),B=w();function Z(s){B.value.toggle(s)}de(d,async s=>{c.value=await A(`/securities/uuid/${v.params.uuid}/markets/${s}`,{params:{from:"2000-01-01"}})});async function q({date:s}){if(await A(`/securities/uuid/${l.value.uuid}/markets/${d.value}/prices/${s}`,{method:"delete"}),c.value){const h=c.value.prices.findIndex(x=>x.date===s);delete c.value.prices[h]}}return pe(()=>{var s;return{title:`${(s=l.value)==null?void 0:s.name} - Portfolio Report`,link:[{rel:"canonical",href:`https://www.portfolio-report.net/securities/${l.value.uuid}`}]}}),(s,h)=>{const x=_("Tag"),P=le,M=be,ee=_e,X=ke,C=_("Column"),V=_("DataTable"),z=_("OverlayPanel"),U=_("TabPanel"),ae=_("Dropdown"),te=he,oe=_("TabView"),O=me("tooltip");return u(),m("div",Ce,[a("div",we,[a("div",Te,[a("div",Pe,[a("h2",null,[r(n(e(l).name)+" ",1),o(x,{class:"mx-1 bg-teal-500 vertical-align-top"},{default:i(()=>[r(n(e(l).securityType),1)]),_:1}),(u(!0),m(j,null,H(e(l).tags,t=>(u(),N(P,{key:t,class:"vertical-align-top",name:t},null,8,["name"]))),128))]),a("div",De,[e(l).isin?E((u(),N(M,{key:0,text:e(l).isin},{default:i(()=>[r(n(e(l).isin),1)]),_:1},8,["text"])),[[O,"ISIN",void 0,{top:!0}]]):D("",!0),e(l).wkn?E((u(),N(M,{key:1,text:e(l).wkn},{default:i(()=>[r(n(e(l).wkn),1)]),_:1},8,["text"])),[[O,"WKN",void 0,{top:!0}]]):D("",!0)]),E((u(),N(ee,{to:(s._.provides[fe]||s.$route).path},{default:i(()=>[Se]),_:1},8,["to"])),[[O,{escape:!1,value:"<h4>Drag and drop!</h4> To add this security in Portfolio Performance, drag and drop it to securities list or statement of assets."},void 0,{right:!0}]])]),a("div",null,[e(l).logoUrl?(u(),m("img",{key:0,src:e(l).logoUrl,style:{"max-width":"100px","max-height":"100px","mix-blend-mode":"multiply"}},null,8,Ie)):D("",!0)])]),o(oe,{class:"mt-2"},{default:i(()=>[o(U,{header:"Overview"},{default:i(()=>[a("ul",null,[(u(!0),m(j,null,H(e(f),t=>(u(),m("li",{key:t.marketCode},[r(" Market: "),a("b",null,n(t.name),1),a("ul",null,[a("li",null,[r(" Currency: "),a("b",null,n(t.currencyCode||"-"),1)]),a("li",null,[r(" Symbol: "),a("b",null,n(t.symbol),1)]),a("li",null,[r(" Prices available: "),a("b",null,n(t.firstPriceDate),1),r(" - "),a("b",null,n(t.lastPriceDate),1)])])]))),128)),e(T).length===1&&e(T)[0].taxonomy?(u(),m("li",Ne,[r(" Country: "),o(X,{country:e(T)[0].taxonomy.code||""},null,8,["country"]),a("b",null,n(e(T)[0].taxonomy.name)+" ("+n(e(T)[0].taxonomy.code)+") ",1)])):e(T).length>1?(u(),m("li",$e,[a("a",{href:"#",onClick:Y},"Countries"),o(z,{ref_key:"countriesOverlay",ref:L,"show-close-icon":!0},{default:i(()=>[o(V,{value:e(T),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm mb-2"},{default:i(()=>[o(C,{field:"weight",header:"Percentage",sortable:!0},{body:i(({data:t})=>[r(n(t.weight)+"% ",1)]),_:1}),o(C,{field:"taxonomy.name",header:"Country",sortable:!0},{body:i(({data:t})=>[o(X,{country:t.taxonomy.code},null,8,["country"]),r(" "+n(t.taxonomy.name),1)]),_:1}),o(C,{field:"taxonomy.code",header:"Code",sortable:!0})]),_:1},8,["value"])]),_:1},512)])):D("",!0),e(I).length===1&&e(I)[0].taxonomy?(u(),m("li",Ae,[r(" Industry: "),a("b",null,n(e(I)[0].taxonomy.name),1)])):e(I).length>1?(u(),m("li",Re,[a("a",{href:"#",onClick:Z},"Industries"),o(z,{ref_key:"industriesOverlay",ref:B,"show-close-icon":!0},{default:i(()=>[o(V,{value:e(I),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm"},{default:i(()=>[o(C,{field:"weight",header:"Percentage",sortable:!0},{body:i(({data:t})=>[r(n(t.weight)+"% ",1)]),_:1}),o(C,{field:"taxonomy.name",header:"Country",sortable:!0})]),_:1},8,["value"])]),_:1},512)])):D("",!0)])]),_:1}),o(U,{header:"Prices"},{default:i(()=>[o(ae,{modelValue:e(d),"onUpdate:modelValue":h[0]||(h[0]=t=>Q(d)?d.value=t:null),options:e(f),"option-label":"name","option-value":"marketCode",placeholder:"Please select market"},{option:i(({option:t})=>[r(n(t.name)+" - "+n(t.marketCode),1)]),_:1},8,["modelValue","options"]),e(c)?(u(),m("div",Ve,[a("ul",null,[a("li",null,[r(" Symbol: "),a("b",null,n(e(c).symbol),1)]),a("li",null,[r(" Currency: "),a("b",null,n(e(c).currencyCode||"-"),1)]),a("li",null,[r(" Prices available: "),a("b",null,n(e(c).firstPriceDate),1),r(" - "),a("b",null,n(e(c).lastPriceDate),1)])]),o(te,{prices:e(c).prices,onDeletePrice:q},null,8,["prices"])])):D("",!0)]),_:1}),e(l).events&&e(l).events.length>0?(u(),N(U,{key:0,header:"Events"},{default:i(()=>[o(V,{value:e(l).events},{default:i(()=>[o(C,{field:"date",header:"Date"}),o(C,{field:"type",header:"Type",style:{"text-transform":"capitalize"}}),o(C,{header:"..."},{body:i(({data:t})=>[r(n(t.type==="dividend"?`${t.amount} ${t.currencyCode}`:"")+" "+n(t.type==="split"?t.ratio:""),1)]),_:1})]),_:1},8,["value"])]),_:1})):D("",!0)]),_:1})])])}}}),Xe=ve(Ue,[["__scopeId","data-v-2a78574d"]]);export{Xe as default};
