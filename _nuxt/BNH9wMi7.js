import{al as x,am as Q,w as _,an as g,n as k}from"./a3sJhXVU.js";import{t as M,a as y}from"./BFiMpf8p.js";const i=new WeakMap;function j(o,n,f={}){const{mode:m="replace",route:a=x(),router:s=Q(),transform:q=t=>t}=f;i.has(s)||i.set(s,new Map);const u=i.get(s);let e=a.query[o];M(()=>{e=void 0});let c;const l=g((t,p)=>(c=p,{get(){return t(),q(e!==void 0?e:y(n))},set(r){e!==r&&(e=r===n||r===null?void 0:r,u.set(o,r===n||r===null?void 0:r),p(),k(()=>{if(u.size===0)return;const h=Object.fromEntries(u.entries());u.clear();const{params:w,query:R,hash:d}=a;s[y(m)]({params:w,query:{...R,...h},hash:d})}))}}));return _(()=>a.query[o],t=>{e!==t&&(e=t,c())},{flush:"sync"}),l}export{j as u};
