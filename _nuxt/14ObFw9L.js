import K from"./qXu1zIx8.js";import z from"./CIDIUQ-n.js";import{h as V,t,B as x,r as h,C as J,p as Q,l as i,D as W,c as X,j as Z,w as ee,E as te,x as l,m as v,q as n,u as c,F as b,s as oe,v as a,z as ae,i as C,G as k,H as N,I as R,J as A,A as re,_ as se,K as ne,L as le}from"./DeRPAKCY.js";import ue from"./Br8GGXGM.js";import ce from"./CK-e8QIF.js";import ie from"./B0o4ZfjY.js";import pe from"./DyvYQvBY.js";import{_ as me}from"./jnhRuH0M.js";import{u as de}from"./BFMzs0vB.js";import{u as D}from"./C0HZITRk.js";import{_ as fe}from"./DlAUqK2U.js";import"./C1boOquN.js";import"./I8V4chry.js";import"./D_PFj1sk.js";import"./4CRyj_GM.js";import"./0YOhhpuV.js";import"./BCCTupoy.js";import"./CwRQrVYM.js";import"./CYqMEOw2.js";import"./Dx-YpZXP.js";const _e=V({__name:"SelectSecurityType",props:{modelValue:{}},emits:["update:modelValue"],setup(g,{emit:r}){const d=r,u=[{text:"*",value:""},{text:"share",value:"share"},{text:"fund",value:"fund"},{text:"crypto",value:"crypto"},{text:"bond",value:"bond"},{text:"index",value:"index"}];function f(o){d("update:modelValue",o)}return(o,p)=>{const _=z;return t(),x(_,{"model-value":o.modelValue,options:u,"option-label":"text","option-value":"value","show-clear":!0,placeholder:"Security Type","onUpdate:modelValue":f},null,8,["model-value"])}}}),he=Symbol.for("nuxt:client-only"),ye=V({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(g,{slots:r,attrs:d}){const u=h(!1);return J(()=>{u.value=!0}),Q(he,!0),f=>{var y;if(u.value)return(y=r.default)==null?void 0:y.call(r);const o=r.fallback||r.placeholder;if(o)return o();const p=f.fallback||f.placeholder||"",_=f.fallbackTag||f.placeholderTag||"span";return i(_,d,p)}}}),P=g=>(ne("data-v-8263f5fd"),g=g(),le(),g),ve={class:"flex justify-center"},be={style:{width:"800px"}},xe={key:0,class:"font-bold"},ge=P(()=>l("br",null,null,-1)),ke={class:"text-lg font-medium flex items-center"},Se={key:0,class:"i-carbon-chart-line mr-1 text-blue-500"},we={class:"text-gray-600 separator-container font-mono"},Te={key:0},Ve={key:1},qe={key:2},$e=P(()=>l("ul",null,[l("li",null,[a(" Actively maintain and develop the "),l("a",{href:"https://www.github.com/portfolio-report",class:"text-blue-500"},"source code on Github"),a(". ")]),l("li",null,[a(" Become member of the "),l("a",{href:"https://forum.portfolio-performance.info",class:"text-blue-500"},"forum"),a(" and help other users. ")]),l("li",null,[a(" Cover monthly costs for server operation and licence fees. Become sponsor on "),l("a",{href:"https://github.com/sponsors/tfabritius",class:"text-blue-500"},"Github"),a(". ")])],-1)),Ie=V({__name:"search",setup(g){const r=D("q","",{transform:s=>s||""}),d=D("securityType","",{transform:s=>s||""}),u=W(),f=X(()=>{let s="https://www.portfolio-report.net/search";return u.query&&u.query.q&&(s+=`?q=${u.query.q}`,u.query.securityType&&(s+=`&securityType=${u.query.securityType}`)),s});Z({title:"Portfolio Report Search",link:[{rel:"canonical",href:f.value}]});const o=h(""),p=h(""),_=h([]),y=h(!1),S=h(!1),w=h(!1),q=h("");async function U(){o.value=o.value.trim(),r.value=o.value,d.value=p.value}ee([r,d],()=>{o.value=r.value,p.value=d.value,j()},{immediate:!0});async function j(){if(r.value){S.value=!0,y.value=!1,w.value=!1;try{const s={q:r.value};p.value&&(s.securityType=d.value);const m=await de("/v1/securities/search",{params:s});S.value=!1,_.value=m,y.value=m.length===0,m.length===1&&await re(`/securities/${m[0].uuid}`)}catch(s){S.value=!1,_.value=[],y.value=!1,w.value=!0,q.value=String(s)}}}return(s,m)=>{const G=K,H=_e,L=ue,M=ce,O=ye,$=ie,T=oe,Y=se,E=pe,F=me,I=te("tooltip");return t(),i("div",ve,[l("div",be,[v(T,null,{title:n(()=>[a(" Security Search ")]),content:n(()=>[l("form",{onSubmit:ae(U,["prevent"])},[v(O,null,{default:n(()=>[v(G,{id:"searchTermInput",modelValue:c(o),"onUpdate:modelValue":m[0]||(m[0]=e=>C(o)?o.value=e:null),type:"search",class:"mt-2 w-full",autofocus:"",placeholder:"ISIN/WKN/Symbol/Name"},null,8,["modelValue"]),v(H,{modelValue:c(p),"onUpdate:modelValue":m[1]||(m[1]=e=>C(p)?p.value=e:null),class:"w-full mt-4"},null,8,["modelValue"]),v(M,{type:"submit",disabled:!c(o)||c(S),class:"w-full flex justify-center mt-4"},{default:n(()=>[c(S)?(t(),x(L,{key:1,style:{height:"20px"}})):(t(),i("span",xe,"Search"))]),_:1},8,["disabled"])]),_:1}),c(y)?(t(),x($,{key:0,severity:"info"},{default:n(()=>[a(" Sorry, no results were found. ")]),_:1})):b("",!0),c(w)?(t(),x($,{key:1,severity:"error"},{default:n(()=>[a(" Sorry, there was an error:"),ge,a(k(c(q)),1)]),_:1})):b("",!0)],32)]),_:1}),c(_).length>0?(t(),x(T,{key:0,class:"mt-4"},{title:n(()=>[a(" Results ")]),content:n(()=>[(t(!0),i(N,null,R(c(_),e=>(t(),i("div",{key:e.uuid,class:"mb-3"},[l("div",ke,[e.pricesAvailable?A((t(),i("i",Se,null,512)),[[I,"Prices available",void 0,{top:!0}]]):b("",!0),A((t(),x(Y,{to:`/securities/${e.uuid}`,class:"text-blue-500"},{default:n(()=>[a(k(e.name),1)]),_:2},1032,["to"])),[[I,"Drag and drop me to Portfolio Performance!",void 0,{top:!0}]]),v(E,{class:"mx-1 p-1 !text-xs !bg-teal-500 !text-white"},{default:n(()=>[a(k(e.securityType),1)]),_:2},1024),(t(!0),i(N,null,R(e.tags,B=>(t(),x(F,{key:B,name:B},null,8,["name"]))),128))]),l("div",we,[e.isin?(t(),i("span",Te,k(e.isin),1)):b("",!0),e.wkn?(t(),i("span",Ve,k(e.wkn),1)):b("",!0),e.code?(t(),i("span",qe,k(e.code),1)):b("",!0)])]))),128))]),_:1})):b("",!0),v(T,{class:"mt-4"},{title:n(()=>[a(" Your contribution is needed ðŸ’ª ")]),content:n(()=>[a(" Your help is needed to keep this website up and running. Have you thought about contributing? You could: "),$e]),_:1})])])}}}),Qe=fe(Ie,[["__scopeId","data-v-8263f5fd"]]);export{Qe as default};
