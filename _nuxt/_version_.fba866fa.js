import{h as v,C as D,M as g,N as B,c as w,l as n,m as x,x as T,H as V,P as A,q as e,s as l,t as P,u as c}from"./entry.2856f245.js";import{u as S}from"./asyncData.c15bf6ad.js";import{u as k}from"./useApi.a373c7ec.js";const F=v({__name:"[version]",async setup(N){var m;let u,i;const p=D(),{data:a,error:b}=([u,i]=g(()=>S(`stats:${p.params.version}`,()=>k(`/stats/updates/${p.params.version}`))),u=await u,i(),u);if(b.value||((m=a.value)==null?void 0:m.byCountry)==null||a.value.byDate==null)throw B({statusCode:404});const y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}},h=w(()=>{var d;if(!((d=a.value)!=null&&d.byCountry))return{labels:[],datasets:[]};const s=[...a.value.byDate].sort((t,o)=>t.date.localeCompare(o.date));return{labels:s.map(t=>t.date),datasets:[{backgroundColor:"#3B82F6",borderColor:"#3B82F6",fill:!1,data:s.map(t=>t.count)}]}});return(s,d)=>{const t=n("Chart"),o=n("Column"),_=n("DataTable"),f=n("TabPanel"),C=n("TabView");return P(),x("div",null,[T("h2",null,"Version Statistics for "+V((s._.provides[A]||s.$route).params.version),1),e(C,null,{default:l(()=>[e(f,{header:"By date"},{default:l(()=>{var r;return[e(t,{type:"line",data:c(h),options:y,style:{height:"400px"}},null,8,["data"]),e(_,{value:(r=c(a))==null?void 0:r.byDate,"sort-field":"date","sort-order":-1,class:"p-datatable-sm"},{default:l(()=>[e(o,{field:"date",header:"Date",sortable:!0}),e(o,{field:"count",header:"Count",sortable:!0,class:"text-right"})]),_:1},8,["value"])]}),_:1}),e(f,{header:"By country"},{default:l(()=>{var r;return[e(_,{value:(r=c(a))==null?void 0:r.byCountry,"sort-field":"count","sort-order":-1,class:"p-datatable-sm"},{default:l(()=>[e(o,{field:"country",header:"Country",sortable:!0}),e(o,{field:"count",header:"Count",sortable:!0,class:"text-right"})]),_:1},8,["value"])]}),_:1})]),_:1})])}}});export{F as default};
