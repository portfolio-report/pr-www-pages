import oe from"./-Biwb1bd.js";import{_ as ae}from"./QHqOluAK.js";import{_ as se}from"./D_wEi3Iy.js";import{h as K,c as R,t as a,l as c,y as re,u as e,r as U,m as l,q as i,v as p,G as r,i as j,x as n,D as ie,M as B,N as Y,j as ce,E as le,H as M,I as Z,J as P,B as g,F as s,P as ne,_ as de,K as ue,L as pe}from"./U2uVmZ6V.js";import me from"./BdJEZZ-c.js";import fe from"./7FSRmhq6.js";import J from"./CictroTa.js";import W from"./DIhg2sOV.js";import{u as O,a as _e}from"./B2Rnz7O1.js";import{u as H}from"./CB4WTGa_.js";import{_ as ge}from"./DlAUqK2U.js";import"./D6b0dv6a.js";import"./B8otg13P.js";import"./hjRrASiM.js";import"./BLgYJk_n.js";import"./B5IRhUZ4.js";import"./D-5xrx1g.js";import"./DQXYKBI3.js";import"./AeN5ZyRB.js";import"./JAOI8j_U.js";import"./CJUNB2VD.js";import"./B28Kdvma.js";import"./BXKOq1JQ.js";import"./CYJ7T2Fq.js";import"./DtZRiIqY.js";import"./BUoSBfuZ.js";import"./c-FY85af.js";import"./DlmKQ0JD.js";import"./m9kIYgDd.js";import"./BLQDyD77.js";import"./C6mlyDJT.js";import"./CmxcQqLN.js";import"./CzgldjDt.js";import"./CQGzKoIv.js";import"./C0V5b0Q8.js";import"./9-mfvp76.js";import"./wl0jJaYS.js";import"./B6SRPtOY.js";import"./DIRya2Eb.js";import"./UOdYRruP.js";import"./DuuOWakV.js";import"./Dr9syhfq.js";const ye=K({__name:"CountryFlag",props:{country:{}},setup(y){const d=y,f=R(()=>({AE:"i-flagpack-ae",AR:"i-flagpack-ar",AT:"i-flagpack-at",AU:"i-flagpack-au",BE:"i-flagpack-be",BG:"i-flagpack-bg",BR:"i-flagpack-br",CA:"i-flagpack-ca",CH:"i-flagpack-ch",CN:"i-flagpack-cn",CZ:"i-flagpack-cz",DE:"i-flagpack-de",DK:"i-flagpack-dk",ES:"i-flagpack-es",EU:"i-flag-eu-4x3",FI:"i-flagpack-fi",FR:"i-flagpack-fr",GB:"i-flagpack-gb-ukm",GR:"i-flagpack-gr",HK:"i-flagpack-hk",HR:"i-flagpack-hr",HU:"i-flagpack-hu",ID:"i-flagpack-id",IL:"i-flagpack-il",IR:"i-flagpack-ie",IN:"i-flagpack-in",IS:"i-flagpack-is",IT:"i-flagpack-it",JP:"i-flagpack-jp",KR:"i-flagpack-kr",LI:"i-flagpack-li",LU:"i-flagpack-lu",MX:"i-flagpack-mx",MY:"i-flagpack-my",NL:"i-flagpack-nl",NO:"i-flagpack-no",NZ:"i-flagpack-nz",PH:"i-flagpack-ph",PL:"i-flagpack-pl",PT:"i-flagpack-pt",RO:"i-flagpack-ro",RU:"i-flagpack-ru",SE:"i-flagpack-se",SG:"i-flagpack-sg",TH:"i-flagpack-th",TR:"i-flagpack-tr",TW:"i-flagpack-tw",US:"i-flagpack-us",VN:"i-flagpack-vn",ZA:"i-flagpack-za"})[d.country]);return(_,h)=>(a(),c("i",{class:re(["ii",e(f)])},null,2))}}),he=n("span",{class:"flex-1 text-right"},"Close",-1),ke=K({__name:"PricesTable",props:{prices:{}},setup(y){const d=y,f=R(()=>d.prices.map(h=>({dateStr:h.date,date:new Date(h.date),close:h.close}))),_=U({date:{operator:"and",constraints:[{value:null,matchMode:"dateIs"}]}});return(h,A)=>{const o=fe,D=J,k=W;return a(),c("div",null,[l(k,{filters:e(_),"onUpdate:filters":A[0]||(A[0]=m=>j(_)?_.value=m:null),value:e(f),class:"font-mono",size:"small",paginator:!0,rows:10,"sort-field":"date","sort-order":-1,"rows-per-page-options":[10,30,100,300],"filter-display":"menu"},{default:i(()=>[l(D,{field:"date",header:"Date",sortable:"","data-type":"date"},{body:i(({data:m})=>[p(r(m.dateStr),1)]),filter:i(({filterModel:m})=>[l(o,{modelValue:m.value,"onUpdate:modelValue":S=>m.value=S,"date-format":"yy-mm-dd",placeholder:"yyyy-mm-dd"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(D,{field:"close","body-class":"!text-right"},{header:i(()=>[he]),body:i(({data:m})=>[p(r(m.close.toLocaleString(void 0,{minimumFractionDigits:2})),1)]),_:1})]),_:1},8,["filters","value"])])}}}),ve=y=>(ue("data-v-34fe0da8"),y=y(),pe(),y),be={class:"flex justify-center"},xe={style:{width:"800px"}},Ce={class:"flex flex-wrap"},we={class:"flex-grow-1"},Ne={class:"separator-container font-mono"},Re=ve(()=>n("span",{class:"mt-2 cursor-move w-20rem p-button p-component"},[n("span",{class:"i-carbon-move i-lg p-button-icon p-button-icon-left"}),n("span",{class:"p-button-label"},"Add to Portfolio Performance")],-1)),De=["src"],Se={class:"mt-4"},Te={class:"flex items-baseline"},Ae={key:0},Ie={key:1},Pe={key:2},Ue={key:3},$e={class:"font-mono"},Ee={class:"font-mono"},Be={key:4},He={key:5,class:"font-mono"},Ke={key:6},Le={key:8},Fe={key:9,class:"font-mono"},Ve={key:10},ze={key:12},Ge=K({__name:"[uuid]",async setup(y){let d,f;const _=ie(),{data:h,error:A}=([d,f]=B(()=>O(`security:${_.params.uuid}`,()=>H(`/securities/uuid/${_.params.uuid}`))),d=await d,f(),d);if(A.value||!h.value)throw Y({statusCode:404,message:"This page could not be found",fatal:!0});const o=U(h.value),D=[{code:"EUR"},{code:"USD"},{code:"AED"},{code:"AUD"},{code:"BGN"},{code:"BRL"},{code:"CAD"},{code:"CHF"},{code:"CNY"},{code:"CZK"},{code:"DKK"},{code:"GBP"},{code:"GBX"},{code:"HKD"},{code:"HRK"},{code:"HUF"},{code:"IDR"},{code:"ILS"},{code:"INR"},{code:"ISK"},{code:"JPY"},{code:"KRW"},{code:"MXN"},{code:"MYR"},{code:"NOK"},{code:"NZD"},{code:"PHP"},{code:"PLN"},{code:"RON"},{code:"RUB"},{code:"SEK"},{code:"SGD"},{code:"THB"},{code:"TRY"},{code:"ZAR"}],k=U(D[0]),{data:m}=([d,f]=B(async()=>_e(`security:${_.params.uuid}:prices:${k.value.code}`,async()=>o.value.pricesAvailable?await H(`/securities/uuid/${_.params.uuid}/prices/${k.value.code}`,{params:{from:"2000-01-01"}}):[],{watch:[k]})),d=await d,f(),d),S=R(()=>{var u,x;return(x=(u=o.value)==null?void 0:u.markets)==null?void 0:x.map(C=>{let w;return C.marketCode==="XETR"?w="XETRA (Frankfurt)":C.marketCode==="XFRA"?w="Frankfurt":C.marketCode==="XNAS"?w="NASDAQ":C.marketCode==="XNYS"&&(w="NYSE"),{...C,name:w}})}),{data:L}=([d,f]=B(()=>O("taxonomies",()=>H("/taxonomies/"))),d=await d,f(),d);if(!L.value)throw Y({statusCode:404,message:"This page could not be found",fatal:!0});const q=U(L.value),F=R(()=>o.value.securityTaxonomies.map(u=>({...u,weight:Number(u.weight),taxonomy:q.value.find(x=>x.uuid===u.taxonomyUuid)}))),v=R(()=>F.value.filter(u=>u.rootTaxonomyUuid==="5b0d5647-a4e6-4db8-807b-c3a6d11697a7")),N=R(()=>F.value.filter(u=>u.rootTaxonomyUuid==="072bba7b-ed7a-4cb4-aab3-91520d00fb00"));return ce(()=>{var u;return{title:`${(u=o.value)==null?void 0:u.name} - Portfolio Report`,link:[{rel:"canonical",href:`https://www.portfolio-report.net/securities/${o.value.uuid}`}]}}),(u,x)=>{var V,z,G,X;const C=oe,w=ae,$=se,Q=de,T=ye,ee=me,te=ke,b=J,E=W,I=le("tooltip");return a(),c("div",be,[n("div",xe,[n("div",Ce,[n("div",we,[n("h2",null,[p(r(e(o).name)+" ",1),l(C,{class:"mx-1 p-1 !text-xs !text-white !bg-teal-500 align-top"},{default:i(()=>[p(r(e(o).securityType),1)]),_:1}),(a(!0),c(M,null,Z(e(o).tags,t=>(a(),g(w,{key:t,class:"align-top",name:t},null,8,["name"]))),128))]),n("div",Ne,[e(o).isin?P((a(),g($,{key:0,text:e(o).isin},{default:i(()=>[p(r(e(o).isin),1)]),_:1},8,["text"])),[[I,"ISIN",void 0,{top:!0}]]):s("",!0),e(o).wkn?P((a(),g($,{key:1,text:e(o).wkn},{default:i(()=>[p(r(e(o).wkn),1)]),_:1},8,["text"])),[[I,"WKN",void 0,{top:!0}]]):s("",!0),e(o).code?P((a(),g($,{key:2,text:e(o).code},{default:i(()=>[p(r(e(o).code),1)]),_:1},8,["text"])),[[I,"Code",void 0,{top:!0}]]):s("",!0)]),P((a(),g(Q,{to:(u._.provides[ne]||u.$route).path},{default:i(()=>[Re]),_:1},8,["to"])),[[I,{escape:!1,value:"<h4>Drag and drop!</h4> To add this security in Portfolio Performance, drag and drop it to securities list or statement of assets."},void 0,{right:!0}]])]),n("div",null,[e(o).logoUrl?(a(),c("img",{key:0,src:e(o).logoUrl,style:{"max-width":"100px","max-height":"100px","mix-blend-mode":"multiply"}},null,8,De)):s("",!0)])]),n("div",Se,[n("div",Te,[e(o).pricesAvailable?(a(),c("h3",Ae," Prices ")):s("",!0),e(o).pricesAvailable?(a(),g(ee,{key:1,modelValue:e(k),"onUpdate:modelValue":x[0]||(x[0]=t=>j(k)?k.value=t:null),options:D,"option-label":"code",class:"ml-2"},{value:i(({value:t})=>[l(T,{country:t.code.substring(0,2),class:"mr-1"},null,8,["country"]),p(" "+r(t.code),1)]),option:i(({option:t})=>[l(T,{country:t.code.substring(0,2),class:"mr-1"},null,8,["country"]),p(" "+r(t.code),1)]),_:1},8,["modelValue"])):s("",!0)]),e(o).pricesAvailable&&e(m)?(a(),g(te,{key:0,prices:e(m)},null,8,["prices"])):s("",!0),e(o).pricesAvailable?s("",!0):(a(),c("span",Ie," No prices available ")),e(S).length>0?(a(),c("h5",Pe," Markets ")):s("",!0),e(S).length>0?(a(),c("ul",Ue,[(a(!0),c(M,null,Z(e(S),t=>(a(),c("li",{key:t.marketCode},[n("b",null,r(t.name),1),n("ul",null,[n("li",null,[p(" Currency: "),l(T,{country:t.currencyCode.substring(0,2),class:"mr-1"},null,8,["country"]),n("b",$e,r(t.currencyCode||"-"),1)]),n("li",null,[p(" Symbol: "),n("b",Ee,r(t.symbol),1)])])]))),128))])):s("",!0),e(v).length===1?(a(),c("h5",Be," Country ")):s("",!0),e(v).length===1?(a(),c("span",He,[l(T,{country:((V=e(v)[0].taxonomy)==null?void 0:V.code)??"",class:"mr-1"},null,8,["country"]),p(" "+r((z=e(v)[0].taxonomy)==null?void 0:z.name)+" ("+r((G=e(v)[0].taxonomy)==null?void 0:G.code)+") ",1)])):s("",!0),e(v).length>1?(a(),c("h5",Ke," Countries ")):s("",!0),e(v).length>1?(a(),g(E,{key:7,value:e(v),"sort-field":"weight","sort-order":-1,class:"mb-2",size:"small"},{default:i(()=>[l(b,{field:"weight",header:"Percentage",sortable:!0},{body:i(({data:t})=>[p(r(t.weight)+"% ",1)]),_:1}),l(b,{field:"taxonomy.name",header:"Country",sortable:!0},{body:i(({data:t})=>[l(T,{country:t.taxonomy.code,class:"mr-1"},null,8,["country"]),p(" "+r(t.taxonomy.name),1)]),_:1}),l(b,{field:"taxonomy.code",header:"Code",sortable:!0})]),_:1},8,["value"])):s("",!0),e(N).length===1?(a(),c("h5",Le," Industry ")):s("",!0),e(N).length===1?(a(),c("span",Fe,r((X=e(N)[0].taxonomy)==null?void 0:X.name),1)):s("",!0),e(N).length>1?(a(),c("h5",Ve," Industries ")):s("",!0),e(N).length>1?(a(),g(E,{key:11,value:e(N),"sort-field":"weight","sort-order":-1,size:"small"},{default:i(()=>[l(b,{field:"weight",header:"Percentage",sortable:!0},{body:i(({data:t})=>[p(r(t.weight)+"% ",1)]),_:1}),l(b,{field:"taxonomy.name",header:"Country",sortable:!0})]),_:1},8,["value"])):s("",!0),e(o).events.length>0?(a(),c("h5",ze," Events ")):s("",!0),e(o).events.length>0?(a(),g(E,{key:13,value:e(o).events,class:"font-mono",size:"small"},{default:i(()=>[l(b,{field:"date",header:"Date"}),l(b,{field:"type",header:"Type",style:{"text-transform":"capitalize"}}),l(b,{header:"..."},{body:i(({data:t})=>[p(r(t.type==="dividend"?`${t.amount} ${t.currencyCode}`:"")+" "+r(t.type==="split"?t.ratio:""),1)]),_:1})]),_:1},8,["value"])):s("",!0)])])])}}}),Pt=ge(Ge,[["__scopeId","data-v-34fe0da8"]]);export{Pt as default};
