import{_ as H}from"./SelectSecurityType.vue_vue_type_script_setup_true_lang.12f48a86.js";import{d as K,u as L,f as W,Q as $,i as c,B as E,q as z,o as s,c as l,b as t,a as m,w as r,m as _,k as v,r as d,R as J,p as O,e,t as p,F as T,l as q,S as I,_ as Z}from"./entry.a7bc077a.js";import{_ as ee}from"./SecurityTag.c8be354c.js";import"./_plugin-vue_export-helper.a1a6add7.js";const te={class:"flex justify-content-center"},oe={style:{width:"800px"}},se=e("Security Search"),ne=["onSubmit"],ae={class:"p-float-label mt-2"},re=t("label",{for:"searchTermInput"},"ISIN/WKN/Symbol/Name",-1),le={key:0,class:"font-bold"},ue=e(" Sorry, no results were found. "),ie=e(" Sorry, there was an error:"),ce=t("br",null,null,-1),me=e("Results"),_e={class:"text-lg font-medium flex align-items-center"},de={key:0,class:"i-carbon-chart-line mr-1"},pe=e(" ISIN: "),fe=e(" | WKN: "),he=e(" | Symbol(s): "),ye={key:0},ve=e("Your contribution is needed \u{1F4AA}"),be=e(" Your help is needed to keep this website up and running. Have you thought about contributing? You could: "),ge=t("ul",null,[t("li",null,[e(" Actively maintain and develop the "),t("a",{href:"https://www.github.com/portfolio-report"},"source code on Github"),e(". ")]),t("li",null,[e(" Become member of the "),t("a",{href:"https://forum.portfolio-performance.info"},"forum"),e(" and help other users. ")]),t("li",null,[e(" Cover monthly costs for server operation and licence fees. Become sponsor on "),t("a",{href:"https://github.com/sponsors/tfabritius"},"Github"),e(". ")])],-1),qe=K({__name:"search",setup(Se){L({title:"Portfolio Report Search"});const f=W(),R=$(),u=c(""),i=c(""),b=c([]),g=c(!1),h=c(!1),w=c(!1),P=c("");C(),k(),E(()=>f.query.q,()=>{f.query.q&&(C(),k())});async function D(){A(),await k()}function C(){u.value=f.query.q,i.value=f.query.securityType||""}function A(){const o={q:u.value};i.value&&(o.securityType=i.value),R.push({path:f.path,query:o})}async function k(){if(!!u.value){h.value=!0,g.value=!1,w.value=!1;try{const o={};i.value&&(o.securityType=i.value);const n=await z(`/securities/search/${encodeURIComponent(u.value.trim())}`,{params:o});h.value=!1,b.value=n,g.value=n.length===0}catch(o){h.value=!1,b.value=[],g.value=!1,w.value=!0,P.value=String(o)}}}function U(o){return o.markets.some(n=>n.firstPriceDate&&n.lastPriceDate)}function F(o){var n;return[...new Set([o.symbolXfra,o.symbolXnas,o.symbolXnys,...(n=o.markets)==null?void 0:n.map(y=>y.symbol)])].filter(y=>!!y)}return(o,n)=>{const y=d("InputText"),M=H,Q=d("ProgressSpinner"),X=d("Button"),N=d("Message"),x=d("Card"),Y=Z,j=d("Chip"),G=ee,V=J("tooltip");return s(),l("div",te,[t("div",oe,[m(x,null,{title:r(()=>[se]),content:r(()=>[t("form",{onSubmit:O(D,["prevent"])},[t("div",ae,[m(y,{id:"searchTermInput",modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=a=>u.value=a),type:"search",class:"w-full",autofocus:""},null,8,["modelValue"]),re]),m(M,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=a=>i.value=a),class:"w-full mt-4"},null,8,["modelValue"]),m(X,{type:"submit",disabled:!u.value||h.value,class:"w-full flex justify-content-center mt-4"},{default:r(()=>[h.value?(s(),_(Q,{key:1,style:{height:"20px"}})):(s(),l("span",le,"Search"))]),_:1},8,["disabled"]),g.value?(s(),_(N,{key:0,severity:"info"},{default:r(()=>[ue]),_:1})):v("",!0),w.value?(s(),_(N,{key:1,severity:"error"},{default:r(()=>[ie,ce,e(p(P.value),1)]),_:1})):v("",!0)],40,ne)]),_:1}),b.value.length>0?(s(),_(x,{key:0,class:"mt-4"},{title:r(()=>[me]),content:r(()=>[(s(!0),l(T,null,q(b.value,a=>(s(),l("div",{key:a.uuid,class:"mb-3"},[t("div",_e,[U(a)?I((s(),l("i",de,null,512)),[[V,"Prices available",void 0,{top:!0}]]):v("",!0),I((s(),_(Y,{to:"/securities/"+a.uuid},{default:r(()=>[e(p(a.name),1)]),_:2},1032,["to"])),[[V,"Drag and drop me to Portfolio Performance!",void 0,{top:!0}]]),m(j,{class:"mx-1 text-sm bg-teal-500 text-white"},{default:r(()=>[e(p(a.securityType),1)]),_:2},1024),(s(!0),l(T,null,q(a.tags,S=>(s(),_(G,{key:S,name:S},null,8,["name"]))),128))]),pe,t("b",null,p(a.isin),1),fe,t("b",null,p(a.wkn),1),he,(s(!0),l(T,null,q(F(a),(S,B)=>(s(),l("span",{key:B},[B!=0?(s(),l("span",ye,", ")):v("",!0),t("span",null,[t("b",null,p(S),1)])]))),128))]))),128))]),_:1})):v("",!0),m(x,{class:"mt-4"},{title:r(()=>[ve]),content:r(()=>[be,ge]),_:1})])])}}});export{qe as default};
