import{_ as N}from"./AddBtn.vue_vue_type_script_setup_true_lang.110b1121.js";import{d as V,u as A,i as r,D as U,q as m,o as S,c as I,a as o,w as s,r as u,b as i,e as E,t as F,p as M,_ as q}from"./entry.513b7bb4.js";import{u as H,_ as L,a as P,b as R}from"./useConfirmDialog.eefefac8.js";import{_ as j}from"./AcceptBtn.vue_vue_type_script_setup_true_lang.500013cb.js";import"./TextBtn.0c174420.js";import"./_plugin-vue_export-helper.a1a6add7.js";const z={class:"flex align-items-center"},G=i("h5",{class:"m-0 flex-grow-1"},"Taxonomies",-1),J=["onSubmit"],K={class:"p-float-label mt-4"},O=i("label",{for:"name"},"Name",-1),te=V({__name:"index",setup(Q){A({title:"Portfolio Report Admin"});const f=H(),l=r(!1),t=r({name:""}),_=r([]);U(c);async function c(){_.value=await m("/taxonomies/")}function p(){t.value={name:""},l.value=!0}function v(n){t.value={...n},l.value=!0}async function x(){var n;(n=t.value)!=null&&n.uuid?await m(`/taxonomies/${t.value.uuid}`,{method:"put",body:t.value}):await m("/taxonomies/",{method:"post",body:t.value}),c(),l.value=!1}async function b(n){await f({message:`Are you sure you want to delete "${n.name}"?`,acceptClass:"p-button-danger"})&&(await m(`/taxonomies/${n.uuid}`,{method:"delete"}),c())}return(n,a)=>{const y=N,C=q,d=u("Column"),w=L,T=P,g=u("DataTable"),h=u("InputText"),D=R,$=j,k=u("Dialog");return S(),I("div",null,[o(g,{value:_.value.filter(e=>e.parentUuid===null)},{header:s(()=>[i("div",z,[G,o(y,{onClick:p})])]),default:s(()=>[o(d,{field:"name",header:"Name",sortable:!0},{body:s(({data:e})=>[o(C,{to:"/admin/taxonomies/"+e.uuid},{default:s(()=>[E(F(e.name),1)]),_:2},1032,["to"])]),_:1}),o(d,{field:"uuid",header:"UUID",sortable:!0}),o(d,null,{body:s(({data:e})=>[o(w,{onClick:B=>v(e)},null,8,["onClick"]),o(T,{onClick:B=>b(e)},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),o(k,{visible:l.value,"onUpdate:visible":a[2]||(a[2]=e=>l.value=e),style:{width:"500px"},modal:!0},{footer:s(()=>[o(D,{label:"Cancel",onClick:a[1]||(a[1]=e=>l.value=!1)}),o($,{type:"submit",form:"editTaxonomyForm",label:"Save"})]),default:s(()=>[i("form",{id:"editTaxonomyForm",onSubmit:M(x,["prevent"])},[i("div",K,[o(h,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.name=e),class:"w-full"},null,8,["modelValue"]),O])],40,J)]),_:1},8,["visible"])])}}});export{te as default};
