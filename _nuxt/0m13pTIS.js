import z from"./CCx04GBo.js";import J from"./DEVoYwCo.js";import{h as V,t,B as x,r as _,C as U,p as Q,l as i,D as W,c as X,j as Z,A as ee,E as te,x as l,m as v,q as s,u,F as b,s as oe,v as o,z as ae,i as N,G as k,H as R,I as A,J as D,_ as re,K as ne,L as se}from"./DVpp4kSu.js";import le from"./B5KRU8mn.js";import ce from"./BdpNaarX.js";import ue from"./Dn48rDNb.js";import ie from"./Qhuz2Kmd.js";import{_ as pe}from"./lsGDu920.js";import{u as me}from"./B9UD6g_2.js";import{u as P}from"./C0iJMeTV.js";import{_ as de}from"./DlAUqK2U.js";import"./FbwrjTqL.js";import"./CosDkeTr.js";import"./BPX1jhY-.js";import"./qWGDYRoh.js";import"./BTlreLQU.js";import"./CDeFUJQL.js";import"./CTT0a7Py.js";import"./Dr4Ptke6.js";import"./aVpby_GE.js";import"./COYdVi9M.js";const fe=V({__name:"SelectSecurityType",props:{modelValue:{}},emits:["update:modelValue"],setup(g,{emit:n}){const y=n,c=[{text:"*",value:""},{text:"share",value:"share"},{text:"fund",value:"fund"},{text:"crypto",value:"crypto"},{text:"bond",value:"bond"},{text:"index",value:"index"}];function m(a){y("update:modelValue",a)}return(a,d)=>{const f=J;return t(),x(f,{"model-value":a.modelValue,options:c,"option-label":"text","option-value":"value","show-clear":!0,placeholder:"Security Type","onUpdate:modelValue":m},null,8,["model-value"])}}}),_e=Symbol.for("nuxt:client-only"),ye=V({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(g,{slots:n,attrs:y}){const c=_(!1);return U(()=>{c.value=!0}),Q(_e,!0),m=>{var h;if(c.value)return(h=n.default)==null?void 0:h.call(n);const a=n.fallback||n.placeholder;if(a)return a();const d=m.fallback||m.placeholder||"",f=m.fallbackTag||m.placeholderTag||"span";return i(f,y,d)}}}),j=g=>(ne("data-v-6a9c21c5"),g=g(),se(),g),he={class:"flex justify-center"},ve={style:{width:"800px"}},be={key:0,class:"font-bold"},xe=j(()=>l("br",null,null,-1)),ge={class:"text-lg font-medium flex items-center"},ke={key:0,class:"i-carbon-chart-line mr-1 text-blue-500"},Se={class:"text-gray-600 separator-container font-mono"},Te={key:0},we={key:1},Ve={key:2},qe=j(()=>l("ul",null,[l("li",null,[o(" Actively maintain and develop the "),l("a",{href:"https://www.github.com/portfolio-report",class:"text-blue-500"},"source code on Github"),o(". ")]),l("li",null,[o(" Become member of the "),l("a",{href:"https://forum.portfolio-performance.info",class:"text-blue-500"},"forum"),o(" and help other users. ")]),l("li",null,[o(" Cover monthly costs for server operation and licence fees. Become sponsor on "),l("a",{href:"https://github.com/sponsors/tfabritius",class:"text-blue-500"},"Github"),o(". ")])],-1)),$e=V({__name:"search",setup(g){const n=P("q","",{transform:r=>r||""}),y=P("securityType","",{transform:r=>r||""}),c=W(),m=X(()=>{let r="https://www.portfolio-report.net/search";return c.query&&c.query.q&&(r+=`?q=${c.query.q}`,c.query.securityType&&(r+=`&securityType=${c.query.securityType}`)),r});Z({title:"Portfolio Report Search",link:[{rel:"canonical",href:m.value}]});const a=_(n.value),d=_(y.value),f=_([]),h=_(!1),S=_(!1),T=_(!1),q=_("");async function G(){a.value=a.value.trim(),n.value=a.value,y.value=d.value,$()}U(()=>{$()});async function $(){if(n.value){S.value=!0,h.value=!1,T.value=!1;try{const r={q:n.value};d.value&&(r.securityType=y.value);const p=await me("/v1/securities/search",{params:r});S.value=!1,f.value=p,h.value=p.length===0,p.length===1&&await ee(`/securities/${p[0].uuid}`)}catch(r){S.value=!1,f.value=[],h.value=!1,T.value=!0,q.value=String(r)}}}return(r,p)=>{const H=z,L=fe,M=le,O=ce,Y=ye,I=ue,w=oe,E=re,F=ie,K=pe,B=te("tooltip");return t(),i("div",he,[l("div",ve,[v(w,null,{title:s(()=>[o(" Security Search ")]),content:s(()=>[l("form",{onSubmit:ae(G,["prevent"])},[v(Y,null,{default:s(()=>[v(H,{id:"searchTermInput",modelValue:u(a),"onUpdate:modelValue":p[0]||(p[0]=e=>N(a)?a.value=e:null),type:"search",class:"mt-2 w-full",autofocus:"",placeholder:"ISIN/WKN/Symbol/Name"},null,8,["modelValue"]),v(L,{modelValue:u(d),"onUpdate:modelValue":p[1]||(p[1]=e=>N(d)?d.value=e:null),class:"w-full mt-4"},null,8,["modelValue"]),v(O,{type:"submit",disabled:!u(a)||u(S),class:"w-full flex justify-center mt-4"},{default:s(()=>[u(S)?(t(),x(M,{key:1,style:{height:"20px"}})):(t(),i("span",be,"Search"))]),_:1},8,["disabled"])]),_:1}),u(h)?(t(),x(I,{key:0,severity:"info"},{default:s(()=>[o(" Sorry, no results were found. ")]),_:1})):b("",!0),u(T)?(t(),x(I,{key:1,severity:"error"},{default:s(()=>[o(" Sorry, there was an error:"),xe,o(k(u(q)),1)]),_:1})):b("",!0)],32)]),_:1}),u(f).length>0?(t(),x(w,{key:0,class:"mt-4"},{title:s(()=>[o(" Results ")]),content:s(()=>[(t(!0),i(R,null,A(u(f),e=>(t(),i("div",{key:e.uuid,class:"mb-3"},[l("div",ge,[e.pricesAvailable?D((t(),i("i",ke,null,512)),[[B,"Prices available",void 0,{top:!0}]]):b("",!0),D((t(),x(E,{to:`/securities/${e.uuid}`,class:"text-blue-500"},{default:s(()=>[o(k(e.name),1)]),_:2},1032,["to"])),[[B,"Drag and drop me to Portfolio Performance!",void 0,{top:!0}]]),v(F,{class:"mx-1 p-1 !text-xs !bg-teal-500 !text-white"},{default:s(()=>[o(k(e.securityType),1)]),_:2},1024),(t(!0),i(R,null,A(e.tags,C=>(t(),x(K,{key:C,name:C},null,8,["name"]))),128))]),l("div",Se,[e.isin?(t(),i("span",Te,k(e.isin),1)):b("",!0),e.wkn?(t(),i("span",we,k(e.wkn),1)):b("",!0),e.code?(t(),i("span",Ve,k(e.code),1)):b("",!0)])]))),128))]),_:1})):b("",!0),v(w,{class:"mt-4"},{title:s(()=>[o(" Your contribution is needed ðŸ’ª ")]),content:s(()=>[o(" Your help is needed to keep this website up and running. Have you thought about contributing? You could: "),qe]),_:1})])])}}}),Qe=de($e,[["__scopeId","data-v-6a9c21c5"]]);export{Qe as default};
