import{h as N,l as b,t,m as u,q as _,x as l,r as f,B as J,p as W,C as X,D as Z,c as ee,j as te,w as oe,A as ne,E as ae,s as i,u as p,F as w,G as h,v as s,z as se,i as A,H as v,I as C,J as B,K as M,_ as le,L as re,M as ue}from"./PlMJa-FS.js";import{_ as ce}from"./Du2X5ZMw.js";import{u as ie}from"./BW4kXBQQ.js";import{_ as pe}from"./DlAUqK2U.js";const de={class:"p-float-label"},me=l("label",null,"Security Type",-1),_e=N({__name:"SelectSecurityType",props:{modelValue:{}},emits:["update:modelValue"],setup(x,{emit:e}){const k=e,g=[{text:"*",value:""},{text:"share",value:"share"},{text:"fund",value:"fund"},{text:"crypto",value:"crypto"},{text:"bond",value:"bond"},{text:"index",value:"index"}];function n(a){k("update:modelValue",a)}return(a,y)=>{const d=b("Dropdown");return t(),u("span",de,[_(d,{class:"w-full","model-value":a.modelValue,options:g,"option-label":"text","option-value":"value","show-clear":!0,"onUpdate:modelValue":n},null,8,["model-value"]),me])}}}),fe=Symbol.for("nuxt:client-only"),ye=N({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(x,{slots:e,attrs:k}){const g=f(!1);return J(()=>{g.value=!0}),W(fe,!0),n=>{var m;if(g.value)return(m=e.default)==null?void 0:m.call(e);const a=e.fallback||e.placeholder;if(a)return a();const y=n.fallback||n.placeholder||"",d=n.fallbackTag||n.placeholderTag||"span";return u(d,k,y)}}}),P=x=>(re("data-v-04f2cb42"),x=x(),ue(),x),he={class:"flex justify-content-center"},ve={style:{width:"800px"}},be={class:"p-float-label mt-2"},xe=P(()=>l("label",{for:"searchTermInput"},"ISIN/WKN/Symbol/Name",-1)),ge={key:0,class:"font-bold"},we=P(()=>l("br",null,null,-1)),ke={class:"text-lg font-medium flex align-items-center"},Te={key:0,class:"i-carbon-chart-line mr-1 text-primary"},Se={class:"text-600 separator-container"},qe={key:0},Ve={key:1},Ie={key:2},Ce=P(()=>l("ul",null,[l("li",null,[s(" Actively maintain and develop the "),l("a",{href:"https://www.github.com/portfolio-report"},"source code on Github"),s(". ")]),l("li",null,[s(" Become member of the "),l("a",{href:"https://forum.portfolio-performance.info"},"forum"),s(" and help other users. ")]),l("li",null,[s(" Cover monthly costs for server operation and licence fees. Become sponsor on "),l("a",{href:"https://github.com/sponsors/tfabritius"},"Github"),s(". ")])],-1)),Be=N({__name:"search",setup(x){const e=X(),k=Z(),g=ee(()=>{let r="https://www.portfolio-report.net/search";return e.query&&e.query.q&&(r+=`?q=${e.query.q}`,e.query.securityType&&(r+=`&securityType=${e.query.securityType}`)),r});te({title:"Portfolio Report Search",link:[{rel:"canonical",href:g.value}]});const n=f(""),a=f(""),y=f([]),d=f(!1),m=f(!1),q=f(!1),R=f("");$(),V(),oe(()=>e.query.q,()=>{e.query.q&&($(),V())});async function j(){G(),await V()}function $(){n.value=e.query.q,a.value=e.query.securityType||""}function G(){const r={q:n.value};a.value&&(r.securityType=a.value),k.push({path:e.path,query:r})}async function V(){if(n.value){m.value=!0,d.value=!1,q.value=!1;try{const r={q:encodeURIComponent(n.value.trim())};a.value&&(r.securityType=a.value);const c=await ie("/v1/securities/search",{params:r});m.value=!1,y.value=c,d.value=c.length===0,c.length===1&&await ne(`/securities/${c[0].uuid}`)}catch(r){m.value=!1,y.value=[],d.value=!1,q.value=!0,R.value=String(r)}}}function H(r){var c;return[...new Set((c=r.markets)==null?void 0:c.map(T=>T.symbol))].filter(T=>!!T)}return(r,c)=>{const T=b("InputText"),L=_e,O=b("ProgressSpinner"),Y=b("Button"),E=ye,D=b("Message"),I=b("Card"),F=le,K=b("Tag"),Q=ce,U=ae("tooltip");return t(),u("div",he,[l("div",ve,[_(I,null,{title:i(()=>[s(" Security Search ")]),content:i(()=>[l("form",{onSubmit:se(j,["prevent"])},[_(E,null,{default:i(()=>[l("div",be,[_(T,{id:"searchTermInput",modelValue:p(n),"onUpdate:modelValue":c[0]||(c[0]=o=>A(n)?n.value=o:null),type:"search",class:"w-full",autofocus:""},null,8,["modelValue"]),xe]),_(L,{modelValue:p(a),"onUpdate:modelValue":c[1]||(c[1]=o=>A(a)?a.value=o:null),class:"w-full mt-4"},null,8,["modelValue"]),_(Y,{type:"submit",disabled:!p(n)||p(m),class:"w-full flex justify-content-center mt-4"},{default:i(()=>[p(m)?(t(),w(O,{key:1,style:{height:"20px"}})):(t(),u("span",ge,"Search"))]),_:1},8,["disabled"])]),_:1}),p(d)?(t(),w(D,{key:0,severity:"info"},{default:i(()=>[s(" Sorry, no results were found. ")]),_:1})):h("",!0),p(q)?(t(),w(D,{key:1,severity:"error"},{default:i(()=>[s(" Sorry, there was an error:"),we,s(v(p(R)),1)]),_:1})):h("",!0)],32)]),_:1}),p(y).length>0?(t(),w(I,{key:0,class:"mt-4"},{title:i(()=>[s(" Results ")]),content:i(()=>[(t(!0),u(C,null,B(p(y),o=>(t(),u("div",{key:o.uuid,class:"mb-3"},[l("div",ke,[o.pricesAvailable?M((t(),u("i",Te,null,512)),[[U,"Prices available",void 0,{top:!0}]]):h("",!0),M((t(),w(F,{to:`/securities/${o.uuid}`},{default:i(()=>[s(v(o.name),1)]),_:2},1032,["to"])),[[U,"Drag and drop me to Portfolio Performance!",void 0,{top:!0}]]),_(K,{class:"mx-1 bg-teal-500"},{default:i(()=>[s(v(o.securityType),1)]),_:2},1024),(t(!0),u(C,null,B(o.tags,S=>(t(),w(Q,{key:S,name:S},null,8,["name"]))),128))]),l("div",Se,[o.isin?(t(),u("span",qe,v(o.isin),1)):h("",!0),o.wkn?(t(),u("span",Ve,v(o.wkn),1)):h("",!0),(t(!0),u(C,null,B(H(o),(S,z)=>(t(),u("span",{key:z},v(S),1))),128)),o.code?(t(),u("span",Ie,v(o.code),1)):h("",!0)])]))),128))]),_:1})):h("",!0),_(I,{class:"mt-4"},{title:i(()=>[s(" Your contribution is needed ðŸ’ª ")]),content:i(()=>[s(" Your help is needed to keep this website up and running. Have you thought about contributing? You could: "),Ce]),_:1})])])}}}),De=pe(Be,[["__scopeId","data-v-04f2cb42"]]);export{De as default};
