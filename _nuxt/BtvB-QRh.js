import Q from"./BAstnHSa.js";import W from"./sRVDkvus.js";import{h as B,t as e,B as g,r as _,C as j,p as X,l as u,D as Z,c as ee,j as te,A as oe,E as ae,x as c,m as v,q as l,u as p,F as b,s as ne,v as a,z as re,i as D,G as x,H as $,I,J as P,_ as se,K as le,L as ue}from"./Dnn-I-_c.js";import ce from"./CS6NfR6c.js";import ie from"./CXF89zyX.js";import pe from"./ZMBpTUTd.js";import me from"./DmjGvFq2.js";import{_ as de}from"./DinJICVv.js";import{u as fe}from"./CxJwyMDu.js";import{u as U}from"./C-UHS6Yo.js";import{_ as _e}from"./DlAUqK2U.js";import"./Bp5L7Se3.js";import"./CMvB492o.js";import"./D_i-Ug6p.js";import"./DS3d8CSv.js";import"./DXHZYZPS.js";import"./DY9fPpUN.js";import"./3wYDP6kI.js";import"./BkHs-uvu.js";import"./DIFqL1mt.js";import"./B6Ip5cHA.js";const ye=B({__name:"SelectSecurityType",props:{modelValue:{}},emits:["update:modelValue"],setup(k,{emit:r}){const y=r,i=[{text:"*",value:""},{text:"share",value:"share"},{text:"fund",value:"fund"},{text:"crypto",value:"crypto"},{text:"bond",value:"bond"},{text:"index",value:"index"}];function m(n){y("update:modelValue",n)}return(n,d)=>{const f=W;return e(),g(f,{"model-value":n.modelValue,options:i,"option-label":"text","option-value":"value","show-clear":!0,placeholder:"Security Type","onUpdate:modelValue":m},null,8,["model-value"])}}}),he=Symbol.for("nuxt:client-only"),ve=B({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(k,{slots:r,attrs:y}){const i=_(!1);return j(()=>{i.value=!0}),X(he,!0),m=>{var h;if(i.value)return(h=r.default)==null?void 0:h.call(r);const n=r.fallback||r.placeholder;if(n)return n();const d=m.fallback||m.placeholder||"",f=m.fallbackTag||m.placeholderTag||"span";return u(f,y,d)}}}),G=k=>(le("data-v-05f40f61"),k=k(),ue(),k),be={class:"flex justify-center"},xe={style:{width:"800px"}},ge={key:0,class:"font-bold"},ke=G(()=>c("br",null,null,-1)),Se={class:"text-lg font-medium flex items-center"},Te={key:0,class:"i-carbon-chart-line mr-1 text-blue-500"},we={class:"text-gray-600 separator-container font-mono"},Ve={key:0},qe={key:1},$e={key:2},Ie=G(()=>c("ul",null,[c("li",null,[a(" Actively maintain and develop the "),c("a",{href:"https://www.github.com/portfolio-report",class:"text-blue-500"},"source code on Github"),a(". ")]),c("li",null,[a(" Become member of the "),c("a",{href:"https://forum.portfolio-performance.info",class:"text-blue-500"},"forum"),a(" and help other users. ")]),c("li",null,[a(" Cover monthly costs for server operation and licence fees. Become sponsor on "),c("a",{href:"https://github.com/sponsors/tfabritius",class:"text-blue-500"},"Github"),a(". ")])],-1)),Be=B({__name:"search",setup(k){const r=U("q","",{transform:o=>o||""}),y=U("securityType","",{transform:o=>o||""}),i=Z(),m=ee(()=>{let o="https://www.portfolio-report.net/search";return i.query&&i.query.q&&(o+=`?q=${i.query.q}`,i.query.securityType&&(o+=`&securityType=${i.query.securityType}`)),o});te({title:"Portfolio Report Search",link:[{rel:"canonical",href:m.value}]});const n=_(r.value),d=_(y.value),f=_([]),h=_(!1),S=_(!1),V=_(!1),C=_("");async function H(){n.value=n.value.trim(),r.value=n.value,y.value=d.value,N()}j(()=>{N()});async function N(){if(r.value){S.value=!0,h.value=!1,V.value=!1;try{const o={q:r.value};d.value&&(o.securityType=y.value);const s=await fe("/v1/securities/search",{params:o});S.value=!1,f.value=s,h.value=s.length===0,s.length===1&&await oe(`/securities/${s[0].uuid}`)}catch(o){S.value=!1,f.value=[],h.value=!1,V.value=!0,C.value=String(o)}}}function L(o){var s;return[...new Set((s=o.markets)==null?void 0:s.map(T=>T.symbol))].filter(T=>!!T)}return(o,s)=>{const T=Q,M=ye,O=ce,Y=ie,E=ve,R=pe,q=ne,F=se,K=me,z=de,A=ae("tooltip");return e(),u("div",be,[c("div",xe,[v(q,null,{title:l(()=>[a(" Security Search ")]),content:l(()=>[c("form",{onSubmit:re(H,["prevent"])},[v(E,null,{default:l(()=>[v(T,{id:"searchTermInput",modelValue:p(n),"onUpdate:modelValue":s[0]||(s[0]=t=>D(n)?n.value=t:null),type:"search",class:"mt-2 w-full",autofocus:"",placeholder:"ISIN/WKN/Symbol/Name"},null,8,["modelValue"]),v(M,{modelValue:p(d),"onUpdate:modelValue":s[1]||(s[1]=t=>D(d)?d.value=t:null),class:"w-full mt-4"},null,8,["modelValue"]),v(Y,{type:"submit",disabled:!p(n)||p(S),class:"w-full flex justify-center mt-4"},{default:l(()=>[p(S)?(e(),g(O,{key:1,style:{height:"20px"}})):(e(),u("span",ge,"Search"))]),_:1},8,["disabled"])]),_:1}),p(h)?(e(),g(R,{key:0,severity:"info"},{default:l(()=>[a(" Sorry, no results were found. ")]),_:1})):b("",!0),p(V)?(e(),g(R,{key:1,severity:"error"},{default:l(()=>[a(" Sorry, there was an error:"),ke,a(x(p(C)),1)]),_:1})):b("",!0)],32)]),_:1}),p(f).length>0?(e(),g(q,{key:0,class:"mt-4"},{title:l(()=>[a(" Results ")]),content:l(()=>[(e(!0),u($,null,I(p(f),t=>(e(),u("div",{key:t.uuid,class:"mb-3"},[c("div",Se,[t.pricesAvailable?P((e(),u("i",Te,null,512)),[[A,"Prices available",void 0,{top:!0}]]):b("",!0),P((e(),g(F,{to:`/securities/${t.uuid}`,class:"text-blue-500"},{default:l(()=>[a(x(t.name),1)]),_:2},1032,["to"])),[[A,"Drag and drop me to Portfolio Performance!",void 0,{top:!0}]]),v(K,{class:"mx-1 p-1 !text-xs !bg-teal-500 !text-white"},{default:l(()=>[a(x(t.securityType),1)]),_:2},1024),(e(!0),u($,null,I(t.tags,w=>(e(),g(z,{key:w,name:w},null,8,["name"]))),128))]),c("div",we,[t.isin?(e(),u("span",Ve,x(t.isin),1)):b("",!0),t.wkn?(e(),u("span",qe,x(t.wkn),1)):b("",!0),(e(!0),u($,null,I(L(t),(w,J)=>(e(),u("span",{key:J},x(w),1))),128)),t.code?(e(),u("span",$e,x(t.code),1)):b("",!0)])]))),128))]),_:1})):b("",!0),v(q,{class:"mt-4"},{title:l(()=>[a(" Your contribution is needed ðŸ’ª ")]),content:l(()=>[a(" Your help is needed to keep this website up and running. Have you thought about contributing? You could: "),Ie]),_:1})])])}}}),Xe=_e(Be,[["__scopeId","data-v-05f40f61"]]);export{Xe as default};
