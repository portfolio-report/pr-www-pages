import{h as O,l as q,t,m as i,q as g,x as r,r as w,B as L,p as Z,C as ee,D as te,E as oe,w as ne,n as se,F as ae,c as re,j as le,A as ue,G as ce,s as m,u as h,H as V,I as S,v as a,z as ie,i as j,J as T,K as $,L as D,M as E,_ as pe,N as de,O as me}from"./O4nCaR6f.js";import{_ as _e}from"./eMDsxPty.js";import{u as fe}from"./DnYnQzvq.js";import{t as ye,a as G}from"./B2dU6y6v.js";import{_ as he}from"./DlAUqK2U.js";const ve={class:"p-float-label"},be=r("label",null,"Security Type",-1),xe=O({__name:"SelectSecurityType",props:{modelValue:{}},emits:["update:modelValue"],setup(_,{emit:s}){const v=s,p=[{text:"*",value:""},{text:"share",value:"share"},{text:"fund",value:"fund"},{text:"crypto",value:"crypto"},{text:"bond",value:"bond"},{text:"index",value:"index"}];function d(e){v("update:modelValue",e)}return(e,f)=>{const c=q("Dropdown");return t(),i("span",ve,[g(c,{class:"w-full","model-value":e.modelValue,options:p,"option-label":"text","option-value":"value","show-clear":!0,"onUpdate:modelValue":d},null,8,["model-value"]),be])}}}),ge=Symbol.for("nuxt:client-only"),we=O({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(_,{slots:s,attrs:v}){const p=w(!1);return L(()=>{p.value=!0}),Z(ge,!0),d=>{var l;if(p.value)return(l=s.default)==null?void 0:l.call(s);const e=s.fallback||s.placeholder;if(e)return e();const f=d.fallback||d.placeholder||"",c=d.fallbackTag||d.placeholderTag||"span";return i(c,v,f)}}}),M=new WeakMap;function H(_,s,v={}){const{mode:p="replace",route:d=ee(),router:e=te(),transform:f=x=>x}=v;M.has(e)||M.set(e,new Map);const c=M.get(e);let l=d.query[_];ye(()=>{l=void 0});let b;const I=oe((x,C)=>(b=C,{get(){return x(),f(l!==void 0?l:G(s))},set(y){l!==y&&(l=y===s||y===null?void 0:y,c.set(_,y===s||y===null?void 0:y),C(),se(()=>{if(c.size===0)return;const B=Object.fromEntries(c.entries());c.clear();const{params:o,query:u,hash:k}=d;e[G(p)]({params:o,query:{...u,...B},hash:k})}))}}));return ne(()=>d.query[_],x=>{l=x,b()},{flush:"sync"}),I}const P=_=>(de("data-v-5cb86587"),_=_(),me(),_),ke={class:"flex justify-content-center"},Se={style:{width:"800px"}},Te={class:"p-float-label mt-2"},qe=P(()=>r("label",{for:"searchTermInput"},"ISIN/WKN/Symbol/Name",-1)),Ve={key:0,class:"font-bold"},Ie=P(()=>r("br",null,null,-1)),Ce={class:"text-lg font-medium flex align-items-center"},Re={key:0,class:"i-carbon-chart-line mr-1 text-primary"},Be={class:"text-600 separator-container"},Ne={key:0},$e={key:1},De={key:2},Me=P(()=>r("ul",null,[r("li",null,[a(" Actively maintain and develop the "),r("a",{href:"https://www.github.com/portfolio-report"},"source code on Github"),a(". ")]),r("li",null,[a(" Become member of the "),r("a",{href:"https://forum.portfolio-performance.info"},"forum"),a(" and help other users. ")]),r("li",null,[a(" Cover monthly costs for server operation and licence fees. Become sponsor on "),r("a",{href:"https://github.com/sponsors/tfabritius"},"Github"),a(". ")])],-1)),Oe=O({__name:"search",setup(_){const s=H("q","",{transform:o=>o||""}),v=H("securityType","",{transform:o=>o||""}),p=ae(),d=re(()=>{let o="https://www.portfolio-report.net/search";return p.query&&p.query.q&&(o+=`?q=${p.query.q}`,p.query.securityType&&(o+=`&securityType=${p.query.securityType}`)),o});le({title:"Portfolio Report Search",link:[{rel:"canonical",href:d.value}]});const e=w(s.value),f=w(v.value),c=w([]),l=w(!1),b=w(!1),I=w(!1),x=w("");async function C(){e.value=e.value.trim(),s.value=e.value,v.value=f.value,y()}L(()=>{y()});async function y(){if(s.value){b.value=!0,l.value=!1,I.value=!1;try{const o={q:s.value};f.value&&(o.securityType=v.value);const u=await fe("/v1/securities/search",{params:o});b.value=!1,c.value=u,l.value=u.length===0,u.length===1&&await ue(`/securities/${u[0].uuid}`)}catch(o){b.value=!1,c.value=[],l.value=!1,I.value=!0,x.value=String(o)}}}function B(o){var u;return[...new Set((u=o.markets)==null?void 0:u.map(k=>k.symbol))].filter(k=>!!k)}return(o,u)=>{const k=q("InputText"),Q=xe,Y=q("ProgressSpinner"),z=q("Button"),F=we,A=q("Message"),N=q("Card"),K=pe,W=q("Tag"),J=_e,U=ce("tooltip");return t(),i("div",ke,[r("div",Se,[g(N,null,{title:m(()=>[a(" Security Search ")]),content:m(()=>[r("form",{onSubmit:ie(C,["prevent"])},[g(F,null,{default:m(()=>[r("div",Te,[g(k,{id:"searchTermInput",modelValue:h(e),"onUpdate:modelValue":u[0]||(u[0]=n=>j(e)?e.value=n:null),type:"search",class:"w-full",autofocus:""},null,8,["modelValue"]),qe]),g(Q,{modelValue:h(f),"onUpdate:modelValue":u[1]||(u[1]=n=>j(f)?f.value=n:null),class:"w-full mt-4"},null,8,["modelValue"]),g(z,{type:"submit",disabled:!h(e)||h(b),class:"w-full flex justify-content-center mt-4"},{default:m(()=>[h(b)?(t(),V(Y,{key:1,style:{height:"20px"}})):(t(),i("span",Ve,"Search"))]),_:1},8,["disabled"])]),_:1}),h(l)?(t(),V(A,{key:0,severity:"info"},{default:m(()=>[a(" Sorry, no results were found. ")]),_:1})):S("",!0),h(I)?(t(),V(A,{key:1,severity:"error"},{default:m(()=>[a(" Sorry, there was an error:"),Ie,a(T(h(x)),1)]),_:1})):S("",!0)],32)]),_:1}),h(c).length>0?(t(),V(N,{key:0,class:"mt-4"},{title:m(()=>[a(" Results ")]),content:m(()=>[(t(!0),i($,null,D(h(c),n=>(t(),i("div",{key:n.uuid,class:"mb-3"},[r("div",Ce,[n.pricesAvailable?E((t(),i("i",Re,null,512)),[[U,"Prices available",void 0,{top:!0}]]):S("",!0),E((t(),V(K,{to:`/securities/${n.uuid}`},{default:m(()=>[a(T(n.name),1)]),_:2},1032,["to"])),[[U,"Drag and drop me to Portfolio Performance!",void 0,{top:!0}]]),g(W,{class:"mx-1 bg-teal-500"},{default:m(()=>[a(T(n.securityType),1)]),_:2},1024),(t(!0),i($,null,D(n.tags,R=>(t(),V(J,{key:R,name:R},null,8,["name"]))),128))]),r("div",Be,[n.isin?(t(),i("span",Ne,T(n.isin),1)):S("",!0),n.wkn?(t(),i("span",$e,T(n.wkn),1)):S("",!0),(t(!0),i($,null,D(B(n),(R,X)=>(t(),i("span",{key:X},T(R),1))),128)),n.code?(t(),i("span",De,T(n.code),1)):S("",!0)])]))),128))]),_:1})):S("",!0),g(N,{class:"mt-4"},{title:m(()=>[a(" Your contribution is needed ðŸ’ª ")]),content:m(()=>[a(" Your help is needed to keep this website up and running. Have you thought about contributing? You could: "),Me]),_:1})])])}}}),Ge=he(Oe,[["__scopeId","data-v-5cb86587"]]);export{Ge as default};
