import{b as C,c as L,a as h,n as N,i as q,t as T,d as E,e as R}from"./BejlMSNL.js";import{c as F,r as x,w as k,at as O,au as S,H as j,g as U,av as P}from"./BF7OD9wd.js";const D=E?window:void 0,I=E?window.navigator:void 0;function V(e){var t;const o=h(e);return(t=o==null?void 0:o.$el)!=null?t:o}function M(...e){let t,o,r,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,r,n]=e,t=D):[t,o,r,n]=e,!t)return N;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const a=[],c=()=>{a.forEach(s=>s()),a.length=0},l=(s,u,d,w)=>(s.addEventListener(u,d,w),()=>s.removeEventListener(u,d,w)),y=k(()=>[V(t),h(n)],([s,u])=>{if(c(),!s)return;const d=q(u)?{...u}:u;a.push(...o.flatMap(w=>r.map(g=>l(s,w,g,d))))},{immediate:!0,flush:"post"}),f=()=>{y(),c()};return T(f),f}function W(){const e=x(!1),t=U();return t&&j(()=>{e.value=!0},t),e}function _(e){const t=W();return F(()=>(t.value,!!e()))}function B(e,t={}){const{immediate:o=!0,fpsLimit:r=void 0,window:n=D}=t,a=x(!1),c=r?1e3/r:null;let l=0,y=null;function f(d){if(!a.value||!n)return;l||(l=d);const w=d-l;if(c&&w<c){y=n.requestAnimationFrame(f);return}l=d,e({delta:w,timestamp:d}),y=n.requestAnimationFrame(f)}function s(){!a.value&&n&&(a.value=!0,l=0,y=n.requestAnimationFrame(f))}function u(){a.value=!1,y!=null&&n&&(n.cancelAnimationFrame(y),y=null)}return o&&s(),T(u),{isActive:O(a),pause:u,resume:s}}function $(e,t={}){const{controls:o=!1,navigator:r=I}=t,n=_(()=>r&&"permissions"in r),a=S(),c=typeof e=="string"?{name:e}:e,l=S(),y=()=>{var s,u;l.value=(u=(s=a.value)==null?void 0:s.state)!=null?u:"prompt"};M(a,"change",y);const f=R(async()=>{if(n.value){if(!a.value)try{a.value=await r.permissions.query(c)}catch{a.value=void 0}finally{y()}if(o)return P(a.value)}});return f(),o?{state:l,isSupported:n,query:f}:l}function X(e={}){const{navigator:t=I,read:o=!1,source:r,copiedDuring:n=1500,legacy:a=!1}=e,c=_(()=>t&&"clipboard"in t),l=$("clipboard-read"),y=$("clipboard-write"),f=F(()=>c.value||a),s=x(""),u=x(!1),d=C(()=>u.value=!1,n);function w(){c.value&&v(l.value)?t.clipboard.readText().then(i=>{s.value=i}):s.value=p()}f.value&&o&&M(["copy","cut"],w);async function g(i=h(r)){f.value&&i!=null&&(c.value&&v(y.value)?await t.clipboard.writeText(i):A(i),s.value=i,u.value=!0,d.start())}function A(i){const m=document.createElement("textarea");m.value=i??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function p(){var i,m,b;return(b=(m=(i=document==null?void 0:document.getSelection)==null?void 0:i.call(document))==null?void 0:m.toString())!=null?b:""}function v(i){return i==="granted"||i==="prompt"}return{isSupported:f,text:s,copied:u,copy:g}}function G(e={}){const{controls:t=!1,interval:o="requestAnimationFrame"}=e,r=x(new Date),n=()=>r.value=new Date,a=o==="requestAnimationFrame"?B(n,{immediate:!0}):L(n,o,{immediate:!0});return t?{now:r,...a}:r}const H=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],Y={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function z(e){return e.toISOString().slice(0,10)}function Z(e,t={}){const{controls:o=!1,updateInterval:r=3e4}=t,{now:n,...a}=G({interval:r,controls:!0}),c=F(()=>J(new Date(h(e)),t,h(n)));return o?{timeAgo:c,...a}:c}function J(e,t={},o=Date.now()){var r;const{max:n,messages:a=Y,fullDateFormatter:c=z,units:l=H,showSecond:y=!1,rounding:f="round"}=t,s=typeof f=="number"?p=>+p.toFixed(f):Math[f],u=+o-+e,d=Math.abs(u);function w(p,v){return s(Math.abs(p)/v.value)}function g(p,v){const i=w(p,v),m=p>0,b=A(v.name,i,m);return A(m?"past":"future",b,m)}function A(p,v,i){const m=a[p];return typeof m=="function"?m(v,i):m.replace("{0}",v.toString())}if(d<6e4&&!y)return a.justNow;if(typeof n=="number"&&d>n)return c(new Date(e));if(typeof n=="string"){const p=(r=l.find(v=>v.name===n))==null?void 0:r.max;if(p&&d>p)return c(new Date(e))}for(const[p,v]of l.entries()){if(w(u,v)<=0&&l[p-1])return g(u,l[p-1]);if(d<v.max)return g(u,v)}return a.invalid}export{Z as a,X as u};
