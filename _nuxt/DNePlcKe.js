import X from"./BiqbHso2.js";import Z from"./BeonbMtG.js";import{h as M,t,l as i,m as g,x as a,r as k,B as H,p as ee,C as te,D as oe,E as ne,w as se,n as re,F as ae,c as le,j as ue,A as ce,G as ie,q as d,u as h,H as q,I as S,s as pe,v as r,z as me,i as U,J as T,K as B,L as C,M as j,_ as de,N as fe,O as _e}from"./CcHjzWyb.js";import ye from"./DBed4mzb.js";import he from"./DXkWPFtA.js";import ve from"./CJecP168.js";import be from"./Cm02GVt7.js";import{_ as xe}from"./DH5Ueb9a.js";import{u as ge}from"./3qbxpUeT.js";import{t as ke,a as E}from"./C88Hw4Q4.js";import{_ as we}from"./DlAUqK2U.js";import"./CEiL8Dpx.js";import"./DeAaQoE8.js";import"./D1QCnnJm.js";import"./B6qsKlP3.js";import"./B_5D8qyK.js";import"./IpZU0Ury.js";const Se={class:"p-float-label"},Te=a("label",null,"Security Type",-1),qe=M({__name:"SelectSecurityType",props:{modelValue:{}},emits:["update:modelValue"],setup(f,{emit:s}){const v=s,p=[{text:"*",value:""},{text:"share",value:"share"},{text:"fund",value:"fund"},{text:"crypto",value:"crypto"},{text:"bond",value:"bond"},{text:"index",value:"index"}];function m(e){v("update:modelValue",e)}return(e,_)=>{const c=Z;return t(),i("span",Se,[g(c,{class:"w-full","model-value":e.modelValue,options:p,"option-label":"text","option-value":"value","show-clear":!0,"onUpdate:modelValue":m},null,8,["model-value"]),Te])}}}),Ve=Symbol.for("nuxt:client-only"),$e=M({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(f,{slots:s,attrs:v}){const p=k(!1);return H(()=>{p.value=!0}),ee(Ve,!0),m=>{var l;if(p.value)return(l=s.default)==null?void 0:l.call(s);const e=s.fallback||s.placeholder;if(e)return e();const _=m.fallback||m.placeholder||"",c=m.fallbackTag||m.placeholderTag||"span";return i(c,v,_)}}}),D=new WeakMap;function G(f,s,v={}){const{mode:p="replace",route:m=te(),router:e=oe(),transform:_=x=>x}=v;D.has(e)||D.set(e,new Map);const c=D.get(e);let l=m.query[f];ke(()=>{l=void 0});let b;const V=ne((x,$)=>(b=$,{get(){return x(),_(l!==void 0?l:E(s))},set(y){l!==y&&(l=y===s||y===null?void 0:y,c.set(f,y===s||y===null?void 0:y),$(),re(()=>{if(c.size===0)return;const R=Object.fromEntries(c.entries());c.clear();const{params:o,query:u,hash:w}=m;e[E(p)]({params:o,query:{...u,...R},hash:w})}))}}));return se(()=>m.query[f],x=>{l=x,b()},{flush:"sync"}),V}const O=f=>(fe("data-v-d95303d9"),f=f(),_e(),f),Ie={class:"flex justify-content-center"},Re={style:{width:"800px"}},Ne={class:"p-float-label mt-2"},Be=O(()=>a("label",{for:"searchTermInput"},"ISIN/WKN/Symbol/Name",-1)),Ce={key:0,class:"font-bold"},De=O(()=>a("br",null,null,-1)),Me={class:"text-lg font-medium flex align-items-center"},Oe={key:0,class:"i-carbon-chart-line mr-1 text-primary"},Ae={class:"text-600 separator-container font-mono"},Pe={key:0},Ue={key:1},je={key:2},Ee=O(()=>a("ul",null,[a("li",null,[r(" Actively maintain and develop the "),a("a",{href:"https://www.github.com/portfolio-report"},"source code on Github"),r(". ")]),a("li",null,[r(" Become member of the "),a("a",{href:"https://forum.portfolio-performance.info"},"forum"),r(" and help other users. ")]),a("li",null,[r(" Cover monthly costs for server operation and licence fees. Become sponsor on "),a("a",{href:"https://github.com/sponsors/tfabritius"},"Github"),r(". ")])],-1)),Ge=M({__name:"search",setup(f){const s=G("q","",{transform:o=>o||""}),v=G("securityType","",{transform:o=>o||""}),p=ae(),m=le(()=>{let o="https://www.portfolio-report.net/search";return p.query&&p.query.q&&(o+=`?q=${p.query.q}`,p.query.securityType&&(o+=`&securityType=${p.query.securityType}`)),o});ue({title:"Portfolio Report Search",link:[{rel:"canonical",href:m.value}]});const e=k(s.value),_=k(v.value),c=k([]),l=k(!1),b=k(!1),V=k(!1),x=k("");async function $(){e.value=e.value.trim(),s.value=e.value,v.value=_.value,y()}H(()=>{y()});async function y(){if(s.value){b.value=!0,l.value=!1,V.value=!1;try{const o={q:s.value};_.value&&(o.securityType=v.value);const u=await ge("/v1/securities/search",{params:o});b.value=!1,c.value=u,l.value=u.length===0,u.length===1&&await ce(`/securities/${u[0].uuid}`)}catch(o){b.value=!1,c.value=[],l.value=!1,V.value=!0,x.value=String(o)}}}function R(o){var u;return[...new Set((u=o.markets)==null?void 0:u.map(w=>w.symbol))].filter(w=>!!w)}return(o,u)=>{const w=X,L=qe,Q=ye,Y=he,z=$e,A=ve,N=pe,F=de,K=be,W=xe,P=ie("tooltip");return t(),i("div",Ie,[a("div",Re,[g(N,null,{title:d(()=>[r(" Security Search ")]),content:d(()=>[a("form",{onSubmit:me($,["prevent"])},[g(z,null,{default:d(()=>[a("div",Ne,[g(w,{id:"searchTermInput",modelValue:h(e),"onUpdate:modelValue":u[0]||(u[0]=n=>U(e)?e.value=n:null),type:"search",class:"w-full",autofocus:""},null,8,["modelValue"]),Be]),g(L,{modelValue:h(_),"onUpdate:modelValue":u[1]||(u[1]=n=>U(_)?_.value=n:null),class:"w-full mt-4"},null,8,["modelValue"]),g(Y,{type:"submit",disabled:!h(e)||h(b),class:"w-full flex justify-content-center mt-4"},{default:d(()=>[h(b)?(t(),q(Q,{key:1,style:{height:"20px"}})):(t(),i("span",Ce,"Search"))]),_:1},8,["disabled"])]),_:1}),h(l)?(t(),q(A,{key:0,severity:"info"},{default:d(()=>[r(" Sorry, no results were found. ")]),_:1})):S("",!0),h(V)?(t(),q(A,{key:1,severity:"error"},{default:d(()=>[r(" Sorry, there was an error:"),De,r(T(h(x)),1)]),_:1})):S("",!0)],32)]),_:1}),h(c).length>0?(t(),q(N,{key:0,class:"mt-4"},{title:d(()=>[r(" Results ")]),content:d(()=>[(t(!0),i(B,null,C(h(c),n=>(t(),i("div",{key:n.uuid,class:"mb-3"},[a("div",Me,[n.pricesAvailable?j((t(),i("i",Oe,null,512)),[[P,"Prices available",void 0,{top:!0}]]):S("",!0),j((t(),q(F,{to:`/securities/${n.uuid}`},{default:d(()=>[r(T(n.name),1)]),_:2},1032,["to"])),[[P,"Drag and drop me to Portfolio Performance!",void 0,{top:!0}]]),g(K,{class:"mx-1 bg-teal-500"},{default:d(()=>[r(T(n.securityType),1)]),_:2},1024),(t(!0),i(B,null,C(n.tags,I=>(t(),q(W,{key:I,name:I},null,8,["name"]))),128))]),a("div",Ae,[n.isin?(t(),i("span",Pe,T(n.isin),1)):S("",!0),n.wkn?(t(),i("span",Ue,T(n.wkn),1)):S("",!0),(t(!0),i(B,null,C(R(n),(I,J)=>(t(),i("span",{key:J},T(I),1))),128)),n.code?(t(),i("span",je,T(n.code),1)):S("",!0)])]))),128))]),_:1})):S("",!0),g(N,{class:"mt-4"},{title:d(()=>[r(" Your contribution is needed ðŸ’ª ")]),content:d(()=>[r(" Your help is needed to keep this website up and running. Have you thought about contributing? You could: "),Ee]),_:1})])])}}}),at=we(Ge,[["__scopeId","data-v-d95303d9"]]);export{at as default};
