import{b as _,c as L,a as h,n as N,i as q,t as T,d as E,e as R}from"./MMo5Al1e.js";import{h as b,a as x,w as k,ax as O,ay as S,H as j,g as U,az as P}from"./Cxmcxolx.js";function V(e){var t;const o=h(e);return(t=o==null?void 0:o.$el)!=null?t:o}const C=E?window:void 0,D=E?window.navigator:void 0;function I(...e){let t,o,r,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,r,n]=e,t=C):[t,o,r,n]=e,!t)return N;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const a=[],c=()=>{a.forEach(i=>i()),a.length=0},u=(i,l,d,w)=>(i.addEventListener(l,d,w),()=>i.removeEventListener(l,d,w)),y=k(()=>[V(t),h(n)],([i,l])=>{if(c(),!i)return;const d=q(l)?{...l}:l;a.push(...o.flatMap(w=>r.map(g=>u(i,w,g,d))))},{immediate:!0,flush:"post"}),f=()=>{y(),c()};return T(f),f}function W(){const e=x(!1),t=U();return t&&j(()=>{e.value=!0},t),e}function M(e){const t=W();return b(()=>(t.value,!!e()))}function z(e,t={}){const{immediate:o=!0,fpsLimit:r=void 0,window:n=C}=t,a=x(!1),c=r?1e3/r:null;let u=0,y=null;function f(d){if(!a.value||!n)return;u||(u=d);const w=d-u;if(c&&w<c){y=n.requestAnimationFrame(f);return}u=d,e({delta:w,timestamp:d}),y=n.requestAnimationFrame(f)}function i(){!a.value&&n&&(a.value=!0,u=0,y=n.requestAnimationFrame(f))}function l(){a.value=!1,y!=null&&n&&(n.cancelAnimationFrame(y),y=null)}return o&&i(),T(l),{isActive:O(a),pause:l,resume:i}}function $(e,t={}){const{controls:o=!1,navigator:r=D}=t,n=M(()=>r&&"permissions"in r),a=S(),c=typeof e=="string"?{name:e}:e,u=S(),y=()=>{a.value&&(u.value=a.value.state)};I(a,"change",y);const f=R(async()=>{if(n.value){if(!a.value)try{a.value=await r.permissions.query(c),y()}catch{u.value="prompt"}if(o)return P(a.value)}});return f(),o?{state:u,isSupported:n,query:f}:u}function X(e={}){const{navigator:t=D,read:o=!1,source:r,copiedDuring:n=1500,legacy:a=!1}=e,c=M(()=>t&&"clipboard"in t),u=$("clipboard-read"),y=$("clipboard-write"),f=b(()=>c.value||a),i=x(""),l=x(!1),d=_(()=>l.value=!1,n);function w(){c.value&&v(u.value)?t.clipboard.readText().then(s=>{i.value=s}):i.value=p()}f.value&&o&&I(["copy","cut"],w);async function g(s=h(r)){f.value&&s!=null&&(c.value&&v(y.value)?await t.clipboard.writeText(s):A(s),i.value=s,l.value=!0,d.start())}function A(s){const m=document.createElement("textarea");m.value=s??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function p(){var s,m,F;return(F=(m=(s=document==null?void 0:document.getSelection)==null?void 0:s.call(document))==null?void 0:m.toString())!=null?F:""}function v(s){return s==="granted"||s==="prompt"}return{isSupported:f,text:i,copied:l,copy:g}}function B(e={}){const{controls:t=!1,interval:o="requestAnimationFrame"}=e,r=x(new Date),n=()=>r.value=new Date,a=o==="requestAnimationFrame"?z(n,{immediate:!0}):L(n,o,{immediate:!0});return t?{now:r,...a}:r}const G=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],H={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function Y(e){return e.toISOString().slice(0,10)}function Z(e,t={}){const{controls:o=!1,updateInterval:r=3e4}=t,{now:n,...a}=B({interval:r,controls:!0}),c=b(()=>J(new Date(h(e)),t,h(n)));return o?{timeAgo:c,...a}:c}function J(e,t={},o=Date.now()){var r;const{max:n,messages:a=H,fullDateFormatter:c=Y,units:u=G,showSecond:y=!1,rounding:f="round"}=t,i=typeof f=="number"?p=>+p.toFixed(f):Math[f],l=+o-+e,d=Math.abs(l);function w(p,v){return i(Math.abs(p)/v.value)}function g(p,v){const s=w(p,v),m=p>0,F=A(v.name,s,m);return A(m?"past":"future",F,m)}function A(p,v,s){const m=a[p];return typeof m=="function"?m(v,s):m.replace("{0}",v.toString())}if(d<6e4&&!y)return a.justNow;if(typeof n=="number"&&d>n)return c(new Date(e));if(typeof n=="string"){const p=(r=u.find(v=>v.name===n))==null?void 0:r.max;if(p&&d>p)return c(new Date(e))}for(const[p,v]of u.entries()){if(w(l,v)<=0&&u[p-1])return g(l,u[p-1]);if(d<v.max)return g(l,v)}return a.invalid}export{Z as a,X as u};
