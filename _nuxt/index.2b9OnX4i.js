import{_ as B}from"./TextBtn.JIc7pcEN.js";import{h as L,r as S,c as V,l as i,m as l,x as v,q as a,u as o,I as u,J as b,v as m,H as _,s as d,t as r,A as $,F as I,_ as F}from"./entry.fiOVwibP.js";import{a as N}from"./asyncData.2isuLPIi.js";import{u as E}from"./useApi.iEntbipF.js";import{u as W}from"./index.mmjdLLDI.js";import"./_plugin-vue_export-helper.x3n3nnut.js";const q={class:"p-buttonset"},z=v("h2",null,"Version Statistics",-1),H={class:"flex align-items-end",style:{height:"400px"}},K=L({__name:"index",setup(J){const h=S(new Date),g=W(h),{data:c,pending:y,refresh:k}=N(async()=>{const s=await E("/stats/updates");for(const t of s)t.firstUpdate&&(t.firstUpdate=new Date(t.firstUpdate),t.firstUpdateInt=t.firstUpdate.getTime()),t.lastUpdate&&(t.lastUpdate=new Date(t.lastUpdate),t.lastUpdateInt=t.lastUpdate.getTime());return h.value=new Date,{versions:s}},"$AU7PyxXx3W"),U=V(()=>{var s,t;return{labels:(s=c.value)==null?void 0:s.versions.map(n=>n.version),datasets:[{backgroundColor:"#3B82F6",data:(t=c.value)==null?void 0:t.versions.map(n=>n.count)}]}}),x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}};return(s,t)=>{const n=i("Button"),f=i("Skeleton"),C=B,D=i("Chart"),T=F,p=i("Column"),w=i("DataTable");return r(),l("div",null,[v("div",q,[a(n,{label:"Versions",icon:"i-carbon-tag",class:"p-button-primary",disabled:!0}),a(n,{label:"Weekly",icon:"i-carbon-calendar",class:"p-button-secondary",onClick:t[0]||(t[0]=e=>("navigateTo"in s?s.navigateTo:o($))("/stats/weekly/"))})]),z,o(y)||!o(c)?(r(),l(u,{key:0},[a(f,{width:"15em"}),v("div",H,[(r(),l(u,null,b([30,25,45,70,90],(e,A)=>a(f,{key:A,width:"20%",height:`${e}%`,class:"mr-2"},null,8,["height"])),64))]),(r(!0),l(u,null,b(Array(10).keys(),e=>(r(),I(f,{key:e,class:"mt-4"}))),128))],64)):(r(),l(u,{key:1},[m(" Last updated "+_(o(g))+" ",1),a(C,{small:"",icon:"i-carbon-renew",onClick:t[1]||(t[1]=e=>o(k)())}),a(D,{type:"bar",data:o(U),options:x,style:{height:"400px"}},null,8,["data"]),a(w,{value:o(c).versions,"sort-field":"version",class:"p-datatable-sm","sort-order":-1},{default:d(()=>[a(p,{field:"version",header:"Version",sortable:!0},{body:d(({data:e})=>[a(T,{to:`/stats/${e.version}`},{default:d(()=>[m(_(e.version),1)]),_:2},1032,["to"])]),_:1}),a(p,{field:"firstUpdateInt",header:"From",sortable:!0},{body:d(e=>[m(_(e.data.firstUpdate.toLocaleString("de-DE")),1)]),_:1}),a(p,{field:"lastUpdateInt",header:"To",sortable:!0},{body:d(e=>[m(_(e.data.lastUpdate.toLocaleString("de-DE")),1)]),_:1}),a(p,{field:"count",header:"Count",sortable:!0,class:"text-right"})]),_:1},8,["value"])],64))])}}});export{K as default};
