import{d as A,n as w,o as i,c,z as te,f as e,r as f,a as l,w as u,h as x,F as oe,M as V,N as $,j as le,u as ne,b as a,t as o,H as g,_ as se,I as re,L as ie,e as s,J as L,K as z,B as K,k as ue}from"./entry.d4de2823.js";import{_ as ce}from"./SecurityTag.2cf12fcc.js";import{u as M}from"./asyncData.8bf084ac.js";import{u as P}from"./useApi.076252f3.js";import"./_plugin-vue_export-helper.a1a6add7.js";const de=A({__name:"CountryFlag",props:{country:null},setup(T){const m=T,k=w(()=>({AR:"i-flagpack-ar",AT:"i-flagpack-at",AU:"i-flagpack-au",BE:"i-flagpack-be",BR:"i-flagpack-br",CA:"i-flagpack-ca",CH:"i-flagpack-ch",CN:"i-flagpack-cn",DE:"i-flagpack-de",DK:"i-flagpack-dk",ES:"i-flagpack-es",FI:"i-flagpack-fi",FR:"i-flagpack-fr",GB:"i-flagpack-gb-ukm",GR:"i-flagpack-gr",IR:"i-flagpack-ie",IN:"i-flagpack-in",IT:"i-flagpack-it",JP:"i-flagpack-jp",KR:"i-flagpack-kr",LI:"i-flagpack-li",LU:"i-flagpack-lu",NL:"i-flagpack-nl",NO:"i-flagpack-no",NZ:"i-flagpack-nz",PL:"i-flagpack-pl",PT:"i-flagpack-pt",RU:"i-flagpack-ru",SE:"i-flagpack-se",SG:"i-flagpack-sg",TR:"i-flagpack-tr",TW:"i-flagpack-tw",US:"i-flagpack-us",VN:"i-flagpack-vn",ZA:"i-flagpack-za"})[m.country]);return(p,d)=>(i(),c("i",{class:te(["ii",e(k)])},null,2))}}),me=A({__name:"PricesTable",props:{prices:null},setup(T){return(m,k)=>{const p=f("Column"),d=f("DataTable");return i(),c("div",null,[l(d,{value:T.prices,class:"p-datatable-sm",paginator:!0,rows:10,"sort-field":"date","sort-order":-1,"rows-per-page-options":[10,30,100,300]},{default:u(()=>[l(p,{field:"date",header:"Date",sortable:!0}),l(p,{field:"close",header:"Close"})]),_:1},8,["value"])])}}}),pe={class:"flex justify-content-center"},fe={style:{width:"800px"}},_e={class:"flex flex-wrap"},ye={class:"flex-grow-1"},ge=["src"],be={key:0},ke={key:1},he={key:2},ve={key:3},xe={key:4},Ce={key:5},we={key:6},Te={key:7},Pe={key:0},Re=A({__name:"[uuid]",async setup(T){let m,k;const p=x(""),d=x(null),D=oe(),{data:I,error:j}=([m,k]=V(()=>M(`security:${D.params.uuid}`,()=>P(`/securities/uuid/${D.params.uuid}`))),m=await m,k(),m);if(j.value||!I.value)throw $({statusCode:404,message:"This page could not be found",fatal:!0});const r=x(I.value),R=w(()=>{var n,_;return(_=(n=r.value)==null?void 0:n.markets)==null?void 0:_.map(y=>{let v;return y.marketCode==="XETR"?v="XETRA (Frankfurt)":y.marketCode==="XFRA"?v="Frankfurt":y.marketCode==="XNAS"?v="NASDAQ":y.marketCode==="XNYS"&&(v="NYSE"),{...y,name:v}})}),{data:X}=([m,k]=V(()=>M("taxonomies",()=>P("/taxonomies/"))),m=await m,k(),m);if(!X.value)throw $({statusCode:404,message:"This page could not be found",fatal:!0});const G=x(X.value),B=w(()=>r.value.securityTaxonomies.map(n=>({...n,weight:Number(n.weight),taxonomy:G.value.find(_=>_.uuid===n.taxonomyUuid)}))),h=w(()=>B.value.filter(n=>n.rootTaxonomyUuid==="5b0d5647-a4e6-4db8-807b-c3a6d11697a7")),E=x(),H=n=>{E.value.toggle(n)},C=w(()=>B.value.filter(n=>n.rootTaxonomyUuid==="072bba7b-ed7a-4cb4-aab3-91520d00fb00")),F=x(),Y=n=>{F.value.toggle(n)};le(p,async n=>{d.value=await P(`/securities/uuid/${D.params.uuid}/markets/${n}`,{params:{from:"2000-01-01"}})});async function J({date:n}){if(await P(`/securities/uuid/${r.value.uuid}/markets/${p.value}/prices/${n}`,{method:"delete"}),d.value){const _=d.value.prices.findIndex(y=>y.date===n);delete d.value.prices[_]}}return ne(()=>{var n;return{title:((n=r.value)==null?void 0:n.name)+" - Portfolio Report"}}),(n,_)=>{const y=f("Button"),v=se,Q=f("Chip"),W=ce,O=de,b=f("Column"),N=f("DataTable"),U=f("OverlayPanel"),S=f("TabPanel"),Z=f("Dropdown"),q=me,ee=f("TabView"),ae=re("tooltip");return i(),c("div",pe,[a("div",fe,[a("div",_e,[a("div",ye,[a("h2",null,o(e(r).name),1),l(v,{to:n.$route.path},{default:u(()=>[ie(l(y,{class:"mt-2 cursor-move w-20rem",icon:"i-carbon-move i-lg",label:"Add to Portfolio Performance"},null,512),[[ae,{escape:!0,value:"<h4>Drag and drop!</h4> To add this security in Portfolio Performance, drag and drop it to securities list or statement of assets."},void 0,{right:!0}]])]),_:1},8,["to"])]),a("div",null,[e(r).logoUrl?(i(),c("img",{key:0,src:e(r).logoUrl,style:{"max-width":"100px","max-height":"100px","mix-blend-mode":"multiply"}},null,8,ge)):g("",!0)])]),l(ee,{class:"mt-2"},{default:u(()=>[l(S,{header:"Overview"},{default:u(()=>[a("ul",null,[a("li",null,[s(" ISIN: "),a("b",null,o(e(r).isin),1)]),a("li",null,[s(" WKN: "),a("b",null,o(e(r).wkn),1)]),(i(!0),c(L,null,z(e(R),t=>(i(),c("li",{key:t.marketCode},[s(" Market: "),a("b",null,o(t.name),1),a("ul",null,[a("li",null,[s(" Currency: "),a("b",null,o(t.currencyCode||"-"),1)]),a("li",null,[s(" Symbol: "),a("b",null,o(t.symbol),1)]),a("li",null,[s(" Prices available: "),a("b",null,o(t.firstPriceDate),1),s(" - "),a("b",null,o(t.lastPriceDate),1)])])]))),128)),e(r).symbolXfra?(i(),c("li",be,[s(" Symbol (Frankfurt): "),a("b",null,o(e(r).symbolXfra),1)])):g("",!0),e(r).symbolXnas?(i(),c("li",ke,[s(" Symbol (NASDAQ): "),a("b",null,o(e(r).symbolXnas),1)])):g("",!0),e(r).symbolXnys?(i(),c("li",he,[s(" Symbol (New York): "),a("b",null,o(e(r).symbolXnys),1)])):g("",!0),a("li",null,[s(" Type: "),l(Q,{class:"mx-1 text-sm bg-teal-500 text-white"},{default:u(()=>[s(o(e(r).securityType),1)]),_:1})]),e(r).tags&&e(r).tags.length>0?(i(),c("li",ve,[s(" Tags: "),(i(!0),c(L,null,z(e(r).tags,t=>(i(),K(W,{key:t,name:t},null,8,["name"]))),128))])):g("",!0),e(h).length===1&&e(h)[0].taxonomy?(i(),c("li",xe,[s(" Country: "),l(O,{country:e(h)[0].taxonomy.code||""},null,8,["country"]),a("b",null,o(e(h)[0].taxonomy.name)+" ("+o(e(h)[0].taxonomy.code)+") ",1)])):e(h).length>1?(i(),c("li",Ce,[a("a",{href:"#",onClick:H},"Countries"),l(U,{ref_key:"countriesOverlay",ref:E,"show-close-icon":!0},{default:u(()=>[l(N,{value:e(h),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm mb-2"},{default:u(()=>[l(b,{field:"weight",header:"Percentage",sortable:!0},{body:u(({data:t})=>[s(o(t.weight)+"%",1)]),_:1}),l(b,{field:"taxonomy.name",header:"Country",sortable:!0},{body:u(({data:t})=>[l(O,{country:t.taxonomy.code},null,8,["country"]),s(" "+o(t.taxonomy.name),1)]),_:1}),l(b,{field:"taxonomy.code",header:"Code",sortable:!0})]),_:1},8,["value"])]),_:1},512)])):g("",!0),e(C).length==1&&e(C)[0].taxonomy?(i(),c("li",we,[s(" Industry: "),a("b",null,o(e(C)[0].taxonomy.name),1)])):e(C).length>1?(i(),c("li",Te,[a("a",{href:"#",onClick:Y},"Industries"),l(U,{ref_key:"industriesOverlay",ref:F,"show-close-icon":!0},{default:u(()=>[l(N,{value:e(C),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm"},{default:u(()=>[l(b,{field:"weight",header:"Percentage",sortable:!0},{body:u(({data:t})=>[s(o(t.weight)+"%",1)]),_:1}),l(b,{field:"taxonomy.name",header:"Country",sortable:!0})]),_:1},8,["value"])]),_:1},512)])):g("",!0)])]),_:1}),l(S,{header:"Prices"},{default:u(()=>[l(Z,{id:"market",modelValue:e(p),"onUpdate:modelValue":_[0]||(_[0]=t=>ue(p)?p.value=t:null),options:e(R),"option-label":"name","option-value":"marketCode",placeholder:"Please select market"},{option:u(({option:t})=>[s(o(t.name)+" - "+o(t.marketCode),1)]),_:1},8,["modelValue","options"]),e(d)?(i(),c("div",Pe,[a("ul",null,[a("li",null,[s(" Symbol: "),a("b",null,o(e(d).symbol),1)]),a("li",null,[s(" Currency: "),a("b",null,o(e(d).currencyCode||"-"),1)]),a("li",null,[s(" Prices available: "),a("b",null,o(e(d).firstPriceDate),1),s(" - "),a("b",null,o(e(d).lastPriceDate),1)])]),l(q,{prices:e(d).prices,onDeletePrice:J},null,8,["prices"])])):g("",!0)]),_:1}),e(r).events&&e(r).events.length>0?(i(),K(S,{key:0,header:"Events"},{default:u(()=>[l(N,{value:e(r).events},{default:u(()=>[l(b,{field:"date",header:"Date"}),l(b,{field:"type",header:"Type",style:{"text-transform":"capitalize"}}),l(b,{header:"..."},{body:u(({data:t})=>[s(o(t.type==="dividend"?t.amount+" "+t.currencyCode:"")+" "+o(t.type==="split"?t.ratio:""),1)]),_:1})]),_:1},8,["value"])]),_:1})):g("",!0)]),_:1})])])}}});export{Re as default};
