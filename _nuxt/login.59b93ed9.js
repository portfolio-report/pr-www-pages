import{d as g,P as h,N as V,i as u,j as k,o as d,c as i,a as e,w as c,r as m,n as B,p as S,b as t,e as C,_ as N,O as T}from"./entry.a7bc077a.js";const I={class:"flex justify-content-center"},U=t("div",{class:"text-center mb-5"},[t("i",{class:"ii i-carbon-user-avatar",style:{"font-size":"3rem"}}),t("div",{class:"text-900 text-3xl font-medium mb-3"},"Welcome Back")],-1),P={key:0},j=C("You are logged in already."),A=["onSubmit"],z=t("label",{for:"username",class:"block text-900 font-medium mb-2"}," Username ",-1),E=t("label",{for:"password",class:"block text-900 font-medium mb-2"}," Password ",-1),O=g({__name:"login",setup(L){const n=h(),p=V(),s=u(""),o=u(""),l=u(!1),v=k(()=>n.loggedIn&&n.isAdmin);async function b(){l.value=!0;try{return await n.login({username:s.value,password:o.value}),s.value="",o.value="",T("/")}catch(_){p.add({severity:"error",summary:"Sign in failed",detail:String(_),life:5e3})}l.value=!1}return(_,a)=>{const x=N,f=m("InputText"),w=m("Button"),y=m("Card");return d(),i("div",I,[e(y,{class:"p-4 shadow-2",style:{width:"40rem"}},{title:c(()=>[U]),content:c(()=>[B(v)?(d(),i("div",P,[e(x,{to:"/"},{default:c(()=>[j]),_:1})])):(d(),i("form",{key:1,onSubmit:S(b,["prevent"])},[z,e(f,{id:"username",ref:"username",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),autofocus:"",type:"text",class:"w-full mb-3"},null,8,["modelValue"]),E,e(f,{id:"password",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=r=>o.value=r),type:"password",class:"w-full mb-3"},null,8,["modelValue"]),e(w,{label:"Sign In",type:"submit",class:"w-full",disabled:l.value},null,8,["disabled"])],40,A))]),_:1})])}}});export{O as default};
