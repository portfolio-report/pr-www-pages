import x from"./B-6nRUvK.js";import D from"./5RpoRGW6.js";import A from"./KYaA74AW.js";import V from"./CqNrEJWY.js";import $ from"./DtIKbAW3.js";import{h as B,H as k,T as w,U as R,r as S,c as T,l as E,x as c,L as F,V as N,m as e,q as n,t as P,u as i,i as U}from"./DO12myHm.js";import{u as q}from"./BQy8i_m4.js";import{u as H}from"./CkEQejWB.js";import{s as L}from"./CX-KwNFd.js";import"./BojlTD2z.js";import"./D_1ldlao.js";import"./BujfpxkS.js";import"./Y1ZLiHlH.js";import"./dpm4ew_w.js";import"./K478Ap9L.js";import"./CijmaVs_.js";import"./RXI26n0P.js";import"./BQiVjyRc.js";import"./CziYYf5U.js";import"./1jtXLgU2.js";import"./C_K3iDCY.js";import"./CcK1ji_y.js";import"./Cksg1tZP.js";import"./CwWU-TtX.js";import"./CAR9QF1C.js";import"./D6s9iCeK.js";import"./DGYO-_ib.js";import"./BRBsgptG.js";import"./B5w_-Xlc.js";import"./sFmIyK-0.js";const O={class:"flex items-center my-2"},j=c("label",{for:"checkboxAccumulated",class:"ml-2"},"Accumulated numbers",-1),Ct=B({__name:"[version]",async setup(z){var _;let u,d;const f=k(),{data:a,error:y}=([u,d]=w(()=>q(`stats:${f.params.version}`,()=>H(`/stats/updates/${f.params.version}`))),u=await u,d(),u);if(y.value||((_=a.value)==null?void 0:_.byCountry)==null||a.value.byDate==null)throw R({statusCode:404});const h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}},m=S(!1),v=T(()=>{var s;if(!((s=a.value)!=null&&s.byCountry))return{labels:[],datasets:[]};const r=[...a.value.byDate].sort((t,o)=>t.date.localeCompare(o.date));return{labels:r.map(t=>t.date),datasets:[{backgroundColor:"#3B82F6",borderColor:"#3B82F6",fill:!1,data:m.value?r.reduce((t,o)=>{const p=t.length>0?t[t.length-1]+o.count:o.count;return t.push(p),t},[]):r.map(t=>t.count)}]}});return(r,s)=>{const t=x,o=D,p=A,b=V,C=$;return P(),E("div",null,[c("h2",null,"Version Statistics for "+F((r._.provides[N]||r.$route).params.version),1),e(C,null,{default:n(()=>[e(b,{header:"By date"},{default:n(()=>{var l;return[e(i(L),{type:"line",data:i(v),options:h,style:{height:"400px"}},null,8,["data"]),c("div",O,[e(t,{modelValue:i(m),"onUpdate:modelValue":s[0]||(s[0]=g=>U(m)?m.value=g:null),binary:"","input-id":"checkboxAccumulated"},null,8,["modelValue"]),j]),e(p,{value:(l=i(a))==null?void 0:l.byDate,"sort-field":"date","sort-order":-1,class:"p-datatable-sm font-mono"},{default:n(()=>[e(o,{field:"date",header:"Date",sortable:!0}),e(o,{field:"count",header:"Count",sortable:!0,class:"text-right"})]),_:1},8,["value"])]}),_:1}),e(b,{header:"By country"},{default:n(()=>{var l;return[e(p,{value:(l=i(a))==null?void 0:l.byCountry,"sort-field":"count","sort-order":-1,class:"p-datatable-sm font-mono"},{default:n(()=>[e(o,{field:"country",header:"Country",sortable:!0}),e(o,{field:"count",header:"Count",sortable:!0,class:"text-right"})]),_:1},8,["value"])]}),_:1})]),_:1})])}}});export{Ct as default};
