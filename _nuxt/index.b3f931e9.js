import{_ as A}from"./TextBtn.37cf94aa.js";import{d as L,h as S,n as V,c as i,b,a,f as s,K as u,L as v,e as m,t as _,w as l,r as d,o as r,E as $,B as E,_ as I}from"./entry.ce822ea9.js";import{a as N}from"./asyncData.2316ae86.js";import{u as F}from"./useApi.40a92f4b.js";import{u as W}from"./index.2c485bca.js";import"./_plugin-vue_export-helper.a1a6add7.js";const z={class:"p-buttonset"},K=b("h2",null,"Version Statistics",-1),O={class:"flex align-items-end",style:{height:"400px"}},J=L({__name:"index",setup(P){const h=S(new Date),y=W(h),{data:c,pending:g,refresh:k}=N(async()=>{const o=await F("/stats/updates");for(const t of o)t.firstUpdate&&(t.firstUpdate=new Date(t.firstUpdate),t.firstUpdateInt=t.firstUpdate.getTime()),t.lastUpdate&&(t.lastUpdate=new Date(t.lastUpdate),t.lastUpdateInt=t.lastUpdate.getTime());return h.value=new Date,{versions:o}},"$AU7PyxXx3W"),U=V(()=>{var o,t;return{labels:(o=c.value)==null?void 0:o.versions.map(n=>n.version),datasets:[{backgroundColor:"#3B82F6",data:(t=c.value)==null?void 0:t.versions.map(n=>n.count)}]}}),x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}};return(o,t)=>{const n=d("Button"),f=d("Skeleton"),w=A,C=d("Chart"),D=I,p=d("Column"),B=d("DataTable");return r(),i("div",null,[b("div",z,[a(n,{label:"Versions",icon:"i-carbon-tag",class:"p-button-primary",disabled:!0}),a(n,{label:"Weekly",icon:"i-carbon-calendar",class:"p-button-secondary",onClick:t[0]||(t[0]=e=>s($)("/stats/weekly/"))})]),K,s(g)||!s(c)?(r(),i(u,{key:0},[a(f,{width:"15em"}),b("div",O,[(r(),i(u,null,v([30,25,45,70,90],(e,T)=>a(f,{key:T,width:"20%",height:e+"%",class:"mr-2"},null,8,["height"])),64))]),(r(!0),i(u,null,v(Array(10).keys(),e=>(r(),E(f,{key:e,class:"mt-4"}))),128))],64)):(r(),i(u,{key:1},[m(" Last updated "+_(s(y))+" ",1),a(w,{small:"",icon:"i-carbon-renew",onClick:t[1]||(t[1]=e=>s(k)())}),a(C,{type:"bar",data:s(U),options:x,style:{height:"400px"}},null,8,["data"]),a(B,{value:s(c).versions,"sort-field":"version",class:"p-datatable-sm","sort-order":-1},{default:l(()=>[a(p,{field:"version",header:"Version",sortable:!0},{body:l(({data:e})=>[a(D,{to:`/stats/${e.version}`},{default:l(()=>[m(_(e.version),1)]),_:2},1032,["to"])]),_:1}),a(p,{field:"firstUpdateInt",header:"From",sortable:!0},{body:l(e=>[m(_(e.data.firstUpdate.toLocaleString("de-DE")),1)]),_:1}),a(p,{field:"lastUpdateInt",header:"To",sortable:!0},{body:l(e=>[m(_(e.data.lastUpdate.toLocaleString("de-DE")),1)]),_:1}),a(p,{field:"count",header:"Count",sortable:!0,class:"text-right"})]),_:1},8,["value"])],64))])}}});export{J as default};
