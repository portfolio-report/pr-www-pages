import{_ as ae}from"./D4ppWVH4.js";import{u as te}from"./CyRS-Bcz.js";import{h as E,r as P,l as w,t as o,m as n,P as oe,v as i,x as d,q as c,s as r,u as e,Q as se,c as S,y as le,R as ce,J as l,i as J,F as re,S as K,T as z,j as ne,G as ie,K as O,L as Z,M as $,H as b,I as s,U as ue,_ as de,N as pe,O as me}from"./CcQdEPac.js";import{u as j,a as fe}from"./BIxe5JnN.js";import{u as F}from"./CuzkekrO.js";import{_ as _e}from"./DlAUqK2U.js";import"./CFIUFaR_.js";const ye=E({__name:"CopyClipboard",props:{text:{}},setup(g){const u=g,{copy:f}=te(),m=P(null);async function h(v){var a,k;f(u.text),(a=m.value)==null||a.show(v),await new Promise(_=>setTimeout(_,1500)),(k=m.value)==null||k.hide()}return(v,a)=>{const k=w("InlineMessage");return o(),n("span",null,[oe(v.$slots,"default"),i(),d("a",{class:"ii i-carbon-copy cursor-pointer hover:text-primary-500",onClick:a[0]||(a[0]=_=>h(_))}),c(e(se),{ref_key:"overlay",ref:m,dismissable:!1,"close-on-escape":!1,pt:{content:{class:"p-0"}}},{default:r(()=>[c(k,{severity:"success"},{default:r(()=>[i("Copied to clipboard")]),_:1})]),_:1},512)])}}}),ge=E({__name:"CountryFlag",props:{country:{}},setup(g){const u=g,f=S(()=>({AE:"i-flagpack-ae",AR:"i-flagpack-ar",AT:"i-flagpack-at",AU:"i-flagpack-au",BE:"i-flagpack-be",BG:"i-flagpack-bg",BR:"i-flagpack-br",CA:"i-flagpack-ca",CH:"i-flagpack-ch",CN:"i-flagpack-cn",CZ:"i-flagpack-cz",DE:"i-flagpack-de",DK:"i-flagpack-dk",ES:"i-flagpack-es",EU:"i-flag-eu-4x3",FI:"i-flagpack-fi",FR:"i-flagpack-fr",GB:"i-flagpack-gb-ukm",GR:"i-flagpack-gr",HK:"i-flagpack-hk",HR:"i-flagpack-hr",HU:"i-flagpack-hu",ID:"i-flagpack-id",IL:"i-flagpack-il",IR:"i-flagpack-ie",IN:"i-flagpack-in",IS:"i-flagpack-is",IT:"i-flagpack-it",JP:"i-flagpack-jp",KR:"i-flagpack-kr",LI:"i-flagpack-li",LU:"i-flagpack-lu",MX:"i-flagpack-mx",MY:"i-flagpack-my",NL:"i-flagpack-nl",NO:"i-flagpack-no",NZ:"i-flagpack-nz",PH:"i-flagpack-ph",PL:"i-flagpack-pl",PT:"i-flagpack-pt",RO:"i-flagpack-ro",RU:"i-flagpack-ru",SE:"i-flagpack-se",SG:"i-flagpack-sg",TH:"i-flagpack-th",TR:"i-flagpack-tr",TW:"i-flagpack-tw",US:"i-flagpack-us",VN:"i-flagpack-vn",ZA:"i-flagpack-za"})[u.country]);return(m,h)=>(o(),n("i",{class:le(["ii",e(f)])},null,2))}}),he=E({__name:"PricesTable",props:{prices:{}},setup(g){const u=g,f=S(()=>u.prices.map(h=>({dateStr:h.date,date:new Date(h.date),close:h.close}))),m=P({date:{operator:ce.AND,constraints:[{value:null,matchMode:"dateIs"}]}});return(h,v)=>{const a=w("Calendar"),k=w("Column"),_=w("DataTable");return o(),n("div",null,[c(_,{filters:e(m),"onUpdate:filters":v[0]||(v[0]=y=>J(m)?m.value=y:null),value:e(f),class:"p-datatable-sm",paginator:!0,rows:10,"sort-field":"date","sort-order":-1,"rows-per-page-options":[10,30,100,300],"filter-display":"menu"},{default:r(()=>[c(k,{field:"date",header:"Date",sortable:"","data-type":"date"},{body:r(({data:y})=>[i(l(y.dateStr),1)]),filter:r(({filterModel:y})=>[c(a,{modelValue:y.value,"onUpdate:modelValue":A=>y.value=A,"date-format":"yy-mm-dd",placeholder:"yyyy-mm-dd"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),c(k,{field:"close",header:"Close"},{body:r(({data:y})=>[i(l(y.close.toLocaleString(void 0,{minimumFractionDigits:2})),1)]),_:1})]),_:1},8,["filters","value"])])}}}),ke=g=>(pe("data-v-47c3ca67"),g=g(),me(),g),be={class:"flex justify-content-center"},ve={style:{width:"800px"}},xe={class:"flex flex-wrap"},Ce={class:"flex-grow-1"},we={class:"separator-container"},Te=ke(()=>d("span",{class:"mt-2 cursor-move w-20rem p-button p-component"},[d("span",{class:"i-carbon-move i-lg p-button-icon p-button-icon-left"}),d("span",{class:"p-button-label"},"Add to Portfolio Performance")],-1)),De=["src"],Ne={class:"mt-4"},Re={key:0},Se={key:2},Ae={key:3},Ie={key:4},Pe={key:5},Ue={key:6},$e={key:7},Ee={key:9},Be={key:10},He={key:11},Ke={key:13},Fe=E({__name:"[uuid]",async setup(g){let u,f;const m=re(),{data:h,error:v}=([u,f]=K(()=>j(`security:${m.params.uuid}`,()=>F(`/securities/uuid/${m.params.uuid}`))),u=await u,f(),u);if(v.value||!h.value)throw z({statusCode:404,message:"This page could not be found",fatal:!0});const a=P(h.value),k=[{code:"EUR"},{code:"USD"},{code:"AED"},{code:"AUD"},{code:"BGN"},{code:"BRL"},{code:"CAD"},{code:"CHF"},{code:"CNY"},{code:"CZK"},{code:"DKK"},{code:"GBP"},{code:"GBX"},{code:"HKD"},{code:"HRK"},{code:"HUF"},{code:"IDR"},{code:"ILS"},{code:"INR"},{code:"ISK"},{code:"JPY"},{code:"KRW"},{code:"MXN"},{code:"MYR"},{code:"NOK"},{code:"NZD"},{code:"PHP"},{code:"PLN"},{code:"RON"},{code:"RUB"},{code:"SEK"},{code:"SGD"},{code:"THB"},{code:"TRY"},{code:"ZAR"}],_=P(k[0]),{data:y}=([u,f]=K(async()=>fe(`security:${m.params.uuid}:prices:${_.value.code}`,async()=>a.value.pricesAvailable?await F(`/securities/uuid/${m.params.uuid}/prices/${_.value.code}`,{params:{from:"2000-01-01"}}):[],{watch:[_]})),u=await u,f(),u),A=S(()=>{var p,T;return(T=(p=a.value)==null?void 0:p.markets)==null?void 0:T.map(D=>{let N;return D.marketCode==="XETR"?N="XETRA (Frankfurt)":D.marketCode==="XFRA"?N="Frankfurt":D.marketCode==="XNAS"?N="NASDAQ":D.marketCode==="XNYS"&&(N="NYSE"),{...D,name:N}})}),{data:L}=([u,f]=K(()=>j("taxonomies",()=>F("/taxonomies/"))),u=await u,f(),u);if(!L.value)throw z({statusCode:404,message:"This page could not be found",fatal:!0});const W=P(L.value),V=S(()=>a.value.securityTaxonomies.map(p=>({...p,weight:Number(p.weight),taxonomy:W.value.find(T=>T.uuid===p.taxonomyUuid)}))),x=S(()=>V.value.filter(p=>p.rootTaxonomyUuid==="5b0d5647-a4e6-4db8-807b-c3a6d11697a7")),R=S(()=>V.value.filter(p=>p.rootTaxonomyUuid==="072bba7b-ed7a-4cb4-aab3-91520d00fb00"));return ne(()=>{var p;return{title:`${(p=a.value)==null?void 0:p.name} - Portfolio Report`,link:[{rel:"canonical",href:`https://www.portfolio-report.net/securities/${a.value.uuid}`}]}}),(p,T)=>{var G,M,X,Y;const D=w("Tag"),N=ae,B=ye,Q=de,I=ge,q=w("Dropdown"),ee=he,C=w("Column"),H=w("DataTable"),U=ie("tooltip");return o(),n("div",be,[d("div",ve,[d("div",xe,[d("div",Ce,[d("h2",null,[i(l(e(a).name)+" ",1),c(D,{class:"mx-1 bg-teal-500 vertical-align-top"},{default:r(()=>[i(l(e(a).securityType),1)]),_:1}),(o(!0),n(O,null,Z(e(a).tags,t=>(o(),b(N,{key:t,class:"vertical-align-top",name:t},null,8,["name"]))),128))]),d("div",we,[e(a).isin?$((o(),b(B,{key:0,text:e(a).isin},{default:r(()=>[i(l(e(a).isin),1)]),_:1},8,["text"])),[[U,"ISIN",void 0,{top:!0}]]):s("",!0),e(a).wkn?$((o(),b(B,{key:1,text:e(a).wkn},{default:r(()=>[i(l(e(a).wkn),1)]),_:1},8,["text"])),[[U,"WKN",void 0,{top:!0}]]):s("",!0),e(a).code?$((o(),b(B,{key:2,text:e(a).code},{default:r(()=>[i(l(e(a).code),1)]),_:1},8,["text"])),[[U,"Code",void 0,{top:!0}]]):s("",!0)]),$((o(),b(Q,{to:(p._.provides[ue]||p.$route).path},{default:r(()=>[Te]),_:1},8,["to"])),[[U,{escape:!1,value:"<h4>Drag and drop!</h4> To add this security in Portfolio Performance, drag and drop it to securities list or statement of assets."},void 0,{right:!0}]])]),d("div",null,[e(a).logoUrl?(o(),n("img",{key:0,src:e(a).logoUrl,style:{"max-width":"100px","max-height":"100px","mix-blend-mode":"multiply"}},null,8,De)):s("",!0)])]),d("div",Ne,[e(a).pricesAvailable?(o(),n("h3",Re,[i(" Prices "),e(a).pricesAvailable?(o(),b(q,{key:0,modelValue:e(_),"onUpdate:modelValue":T[0]||(T[0]=t=>J(_)?_.value=t:null),options:k,"option-label":"code"},{value:r(({value:t})=>[c(I,{country:t.code.substring(0,2),class:"mr-1"},null,8,["country"]),i(" "+l(t.code),1)]),option:r(({option:t})=>[c(I,{country:t.code.substring(0,2),class:"mr-1"},null,8,["country"]),i(" "+l(t.code),1)]),_:1},8,["modelValue"])):s("",!0)])):s("",!0),e(a).pricesAvailable&&e(y)?(o(),b(ee,{key:1,prices:e(y)},null,8,["prices"])):s("",!0),e(a).pricesAvailable?s("",!0):(o(),n("span",Se," No prices available ")),e(A).length>0?(o(),n("h5",Ae," Markets ")):s("",!0),e(A).length>0?(o(),n("ul",Ie,[(o(!0),n(O,null,Z(e(A),t=>(o(),n("li",{key:t.marketCode},[d("b",null,l(t.name),1),d("ul",null,[d("li",null,[i(" Currency: "),c(I,{country:t.currencyCode.substring(0,2),class:"mr-1"},null,8,["country"]),d("b",null,l(t.currencyCode||"-"),1)]),d("li",null,[i(" Symbol: "),d("b",null,l(t.symbol),1)])])]))),128))])):s("",!0),e(x).length===1?(o(),n("h5",Pe," Country ")):s("",!0),e(x).length===1?(o(),n("span",Ue,[c(I,{country:((G=e(x)[0].taxonomy)==null?void 0:G.code)??"",class:"mr-1"},null,8,["country"]),i(" "+l((M=e(x)[0].taxonomy)==null?void 0:M.name)+" ("+l((X=e(x)[0].taxonomy)==null?void 0:X.code)+") ",1)])):s("",!0),e(x).length>1?(o(),n("h5",$e," Countries ")):s("",!0),e(x).length>1?(o(),b(H,{key:8,value:e(x),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm mb-2"},{default:r(()=>[c(C,{field:"weight",header:"Percentage",sortable:!0},{body:r(({data:t})=>[i(l(t.weight)+"% ",1)]),_:1}),c(C,{field:"taxonomy.name",header:"Country",sortable:!0},{body:r(({data:t})=>[c(I,{country:t.taxonomy.code,class:"mr-1"},null,8,["country"]),i(" "+l(t.taxonomy.name),1)]),_:1}),c(C,{field:"taxonomy.code",header:"Code",sortable:!0})]),_:1},8,["value"])):s("",!0),e(R).length===1?(o(),n("h5",Ee," Industry ")):s("",!0),e(R).length===1?(o(),n("span",Be,l((Y=e(R)[0].taxonomy)==null?void 0:Y.name),1)):s("",!0),e(R).length>1?(o(),n("h5",He," Industries ")):s("",!0),e(R).length>1?(o(),b(H,{key:12,value:e(R),"sort-field":"weight","sort-order":-1,class:"p-datatable-sm"},{default:r(()=>[c(C,{field:"weight",header:"Percentage",sortable:!0},{body:r(({data:t})=>[i(l(t.weight)+"% ",1)]),_:1}),c(C,{field:"taxonomy.name",header:"Country",sortable:!0})]),_:1},8,["value"])):s("",!0),e(a).events.length>0?(o(),n("h5",Ke," Events ")):s("",!0),e(a).events.length>0?(o(),b(H,{key:14,value:e(a).events},{default:r(()=>[c(C,{field:"date",header:"Date"}),c(C,{field:"type",header:"Type",style:{"text-transform":"capitalize"}}),c(C,{header:"..."},{body:r(({data:t})=>[i(l(t.type==="dividend"?`${t.amount} ${t.currencyCode}`:"")+" "+l(t.type==="split"?t.ratio:""),1)]),_:1})]),_:1},8,["value"])):s("",!0)])])])}}}),Oe=_e(Fe,[["__scopeId","data-v-47c3ca67"]]);export{Oe as default};
